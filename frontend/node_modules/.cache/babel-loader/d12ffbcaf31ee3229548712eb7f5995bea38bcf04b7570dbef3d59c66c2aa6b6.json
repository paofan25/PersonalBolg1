{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/web.dom-exception.stack.js\";\n/**\n * 星火认知大模型服务\n * 用于集成讯飞星火大模型API\n */\nimport CryptoJS from 'crypto-js';\nclass SparkService {\n  constructor() {\n    // 直接硬编码配置，确保配置正确\n    this.config = {\n      appId: 'bb840282',\n      apiKey: '178baf6c846eaeb5ea632cdab055b9cd',\n      apiSecret: 'YjMzMmE3NzczOWExZjQ3ZWI1NWY3OWJi',\n      apiUrl: 'wss://spark-api.xf-yun.com/v1.1/chat'\n    };\n    console.log('星火服务配置:', {\n      appId: this.config.appId,\n      apiKey: this.config.apiKey ? this.config.apiKey.substring(0, 6) + '******' : '未配置',\n      apiSecret: this.config.apiSecret ? this.config.apiSecret.substring(0, 6) + '******' : '未配置',\n      apiUrl: this.config.apiUrl\n    });\n  }\n\n  /**\n   * 生成鉴权URL\n   * @returns {string} 带鉴权参数的WebSocket URL\n   */\n  generateAuthUrl() {\n    try {\n      const apiUrl = this.config.apiUrl;\n      const {\n        host,\n        path\n      } = this._parseUrl(apiUrl);\n      const date = new Date().toGMTString();\n      const algorithm = 'hmac-sha256';\n      const headers = 'host date request-line';\n      const signatureOrigin = `host: ${host}\\ndate: ${date}\\nGET ${path} HTTP/1.1`;\n      const signatureSha = CryptoJS.HmacSHA256(signatureOrigin, this.config.apiSecret);\n      const signature = CryptoJS.enc.Base64.stringify(signatureSha);\n      const authorizationOrigin = `api_key=\"${this.config.apiKey}\", algorithm=\"${algorithm}\", headers=\"${headers}\", signature=\"${signature}\"`;\n      const authorization = btoa(authorizationOrigin);\n      return `${apiUrl}?authorization=${authorization}&date=${date}&host=${host}`;\n    } catch (error) {\n      console.error('生成鉴权URL失败:', error);\n      throw new Error('生成鉴权URL失败');\n    }\n  }\n\n  /**\n   * 解析URL获取host和path\n   * @param {string} url API URL\n   * @returns {Object} 包含host和path的对象\n   */\n  _parseUrl(url) {\n    try {\n      const urlObj = new URL(url);\n      return {\n        host: urlObj.host,\n        path: urlObj.pathname\n      };\n    } catch (error) {\n      console.error('URL解析失败:', error);\n      throw new Error('URL解析失败');\n    }\n  }\n\n  /**\n   * 发送消息到星火大模型\n   * @param {string} message 用户消息\n   * @param {Array} history 历史消息记录\n   * @param {Object} options 可选参数\n   * @returns {Promise<Object>} 响应结果\n   */\n  async sendMessage(message, history = [], options = {}) {\n    return new Promise((resolve, reject) => {\n      try {\n        const authUrl = this.generateAuthUrl();\n        console.log('连接WebSocket:', authUrl.substring(0, 60) + '...');\n        const ws = new WebSocket(authUrl);\n        let response = '';\n        let isError = false;\n        ws.onopen = () => {\n          console.log('星火WebSocket连接已建立');\n\n          // 构建消息历史\n          const messages = [...history];\n          // 添加当前用户消息\n          messages.push({\n            role: 'user',\n            content: message\n          });\n\n          // 构建请求数据\n          const requestData = {\n            header: {\n              app_id: this.config.appId,\n              uid: `user_${Date.now()}`\n            },\n            parameter: {\n              chat: {\n                domain: options.domain || 'lite',\n                temperature: options.temperature || 0.7,\n                max_tokens: options.maxTokens || 1024\n              }\n            },\n            payload: {\n              message: {\n                text: messages\n              }\n            }\n          };\n          console.log('发送请求数据:', JSON.stringify(requestData).substring(0, 100) + '...');\n          // 发送请求\n          ws.send(JSON.stringify(requestData));\n        };\n        ws.onmessage = event => {\n          try {\n            const data = JSON.parse(event.data);\n            console.log('收到响应:', JSON.stringify(data).substring(0, 100) + '...');\n\n            // 检查是否有错误\n            if (data.header.code !== 0) {\n              isError = true;\n              ws.close();\n              reject(new Error(`错误码: ${data.header.code}, 错误信息: ${data.header.message}`));\n              return;\n            }\n\n            // 获取回复内容\n            if (data.payload && data.payload.choices && data.payload.choices.text) {\n              const content = data.payload.choices.text[0].content;\n              response += content;\n            }\n\n            // 检查是否结束\n            if (data.header.status === 2) {\n              ws.close();\n              resolve({\n                content: response,\n                status: 'success'\n              });\n            }\n          } catch (e) {\n            console.error('处理WebSocket消息错误:', e);\n            isError = true;\n            ws.close();\n            reject(new Error('处理响应数据失败'));\n          }\n        };\n        ws.onerror = error => {\n          console.error('WebSocket连接错误:', error);\n          isError = true;\n          reject(error);\n        };\n        ws.onclose = () => {\n          console.log('WebSocket连接已关闭');\n          if (!isError && !response) {\n            reject(new Error('WebSocket连接关闭但未收到响应'));\n          }\n        };\n\n        // 设置连接超时\n        setTimeout(() => {\n          if (ws.readyState === WebSocket.CONNECTING || ws.readyState === WebSocket.OPEN) {\n            isError = true;\n            ws.close();\n            reject(new Error('连接超时'));\n          }\n        }, 10000); // 10秒超时\n      } catch (error) {\n        console.error('发送消息错误:', error);\n        reject(error);\n      }\n    });\n  }\n\n  /**\n   * 根据情绪生成特定风格的回复\n   * @param {string} text 用户输入\n   * @param {string} emotion 情绪类型\n   * @returns {Promise<string>} 生成的回复\n   */\n  async generateResponse(text, emotion = 'neutral') {\n    try {\n      console.log(`生成回复，文本: ${text}, 情绪: ${emotion}`);\n\n      // 构建 prompt\n      const prompt = `你是一个可爱的AI助手\"糖球\"，性格温柔活泼。请根据以下\n要求回复:\n1. 使用可爱、治愈的语气\n2. 每句话结尾加上可爱的颜文字，如(●ˇ∀ˇ●)\n3. 回复长度控制在100字以内\n4. 当前用户情绪: ${emotion}，请相应调整回复语气\n5. 可以适当使用emoji表情\n\n用户说: ${text}`;\n\n      // 发送到星火API\n      const response = await this.sendMessage(prompt, [], {\n        temperature: 0.8\n      });\n      console.log('获取到AI回复:', response.content);\n      return response.content;\n    } catch (error) {\n      console.error('生成回复出错:', error);\n      // 降级处理，返回默认回复\n      return `抱歉，糖球现在有点迷糊，请稍后再试吧~ (●ˇ∀ˇ●)`;\n    }\n  }\n}\nexport default SparkService;","map":{"version":3,"names":["CryptoJS","SparkService","constructor","config","appId","apiKey","apiSecret","apiUrl","console","log","substring","generateAuthUrl","host","path","_parseUrl","date","Date","toGMTString","algorithm","headers","signatureOrigin","signatureSha","HmacSHA256","signature","enc","Base64","stringify","authorizationOrigin","authorization","btoa","error","Error","url","urlObj","URL","pathname","sendMessage","message","history","options","Promise","resolve","reject","authUrl","ws","WebSocket","response","isError","onopen","messages","push","role","content","requestData","header","app_id","uid","now","parameter","chat","domain","temperature","max_tokens","maxTokens","payload","text","JSON","send","onmessage","event","data","parse","code","close","choices","status","e","onerror","onclose","setTimeout","readyState","CONNECTING","OPEN","generateResponse","emotion","prompt"],"sources":["E:/code/PersonalBolg1/frontend/src/services/sparkAI.js"],"sourcesContent":["/**\n * 星火认知大模型服务\n * 用于集成讯飞星火大模型API\n */\nimport CryptoJS from 'crypto-js';\n\nclass SparkService {\n  constructor() {\n    // 直接硬编码配置，确保配置正确\n    this.config = {\n      appId: 'bb840282',\n      apiKey: '178baf6c846eaeb5ea632cdab055b9cd',\n      apiSecret: 'YjMzMmE3NzczOWExZjQ3ZWI1NWY3OWJi',\n      apiUrl: 'wss://spark-api.xf-yun.com/v1.1/chat'\n    };\n    \n    console.log('星火服务配置:', {\n      appId: this.config.appId,\n      apiKey: this.config.apiKey ? this.config.apiKey.substring(0, 6) + '******' : '未配置',\n      apiSecret: this.config.apiSecret ? this.config.apiSecret.substring(0, 6) + '******' : '未配置',\n      apiUrl: this.config.apiUrl\n    });\n  }\n\n  /**\n   * 生成鉴权URL\n   * @returns {string} 带鉴权参数的WebSocket URL\n   */\n  generateAuthUrl() {\n    try {\n      const apiUrl = this.config.apiUrl;\n      const { host, path } = this._parseUrl(apiUrl);\n      const date = new Date().toGMTString();\n      const algorithm = 'hmac-sha256';\n      const headers = 'host date request-line';\n      const signatureOrigin = `host: ${host}\\ndate: ${date}\\nGET ${path} HTTP/1.1`;\n      const signatureSha = CryptoJS.HmacSHA256(signatureOrigin, this.config.apiSecret);\n      const signature = CryptoJS.enc.Base64.stringify(signatureSha);\n      const authorizationOrigin = `api_key=\"${this.config.apiKey}\", algorithm=\"${algorithm}\", headers=\"${headers}\", signature=\"${signature}\"`;\n      const authorization = btoa(authorizationOrigin);\n\n      return `${apiUrl}?authorization=${authorization}&date=${date}&host=${host}`;\n    } catch (error) {\n      console.error('生成鉴权URL失败:', error);\n      throw new Error('生成鉴权URL失败');\n    }\n  }\n\n  /**\n   * 解析URL获取host和path\n   * @param {string} url API URL\n   * @returns {Object} 包含host和path的对象\n   */\n  _parseUrl(url) {\n    try {\n      const urlObj = new URL(url);\n      return {\n        host: urlObj.host,\n        path: urlObj.pathname\n      };\n    } catch (error) {\n      console.error('URL解析失败:', error);\n      throw new Error('URL解析失败');\n    }\n  }\n\n  /**\n   * 发送消息到星火大模型\n   * @param {string} message 用户消息\n   * @param {Array} history 历史消息记录\n   * @param {Object} options 可选参数\n   * @returns {Promise<Object>} 响应结果\n   */\n  async sendMessage(message, history = [], options = {}) {\n    return new Promise((resolve, reject) => {\n      try {\n        const authUrl = this.generateAuthUrl();\n        console.log('连接WebSocket:', authUrl.substring(0, 60) + '...');\n        \n        const ws = new WebSocket(authUrl);\n        let response = '';\n        let isError = false;\n        \n        ws.onopen = () => {\n          console.log('星火WebSocket连接已建立');\n          \n          // 构建消息历史\n          const messages = [...history];\n          // 添加当前用户消息\n          messages.push({ role: 'user', content: message });\n          \n          // 构建请求数据\n          const requestData = {\n            header: {\n              app_id: this.config.appId,\n              uid: `user_${Date.now()}`\n            },\n            parameter: {\n              chat: {\n                domain: options.domain || 'lite',\n                temperature: options.temperature || 0.7,\n                max_tokens: options.maxTokens || 1024\n              }\n            },\n            payload: {\n              message: {\n                text: messages\n              }\n            }\n          };\n          \n          console.log('发送请求数据:', JSON.stringify(requestData).substring(0, 100) + '...');\n          // 发送请求\n          ws.send(JSON.stringify(requestData));\n        };\n        \n        ws.onmessage = (event) => {\n          try {\n            const data = JSON.parse(event.data);\n            console.log('收到响应:', JSON.stringify(data).substring(0, 100) + '...');\n            \n            // 检查是否有错误\n            if (data.header.code !== 0) {\n              isError = true;\n              ws.close();\n              reject(new Error(`错误码: ${data.header.code}, 错误信息: ${data.header.message}`));\n              return;\n            }\n            \n            // 获取回复内容\n            if (data.payload && data.payload.choices && data.payload.choices.text) {\n              const content = data.payload.choices.text[0].content;\n              response += content;\n            }\n            \n            // 检查是否结束\n            if (data.header.status === 2) {\n              ws.close();\n              resolve({ content: response, status: 'success' });\n            }\n          } catch (e) {\n            console.error('处理WebSocket消息错误:', e);\n            isError = true;\n            ws.close();\n            reject(new Error('处理响应数据失败'));\n          }\n        };\n        \n        ws.onerror = (error) => {\n          console.error('WebSocket连接错误:', error);\n          isError = true;\n          reject(error);\n        };\n        \n        ws.onclose = () => {\n          console.log('WebSocket连接已关闭');\n          if (!isError && !response) {\n            reject(new Error('WebSocket连接关闭但未收到响应'));\n          }\n        };\n        \n        // 设置连接超时\n        setTimeout(() => {\n          if (ws.readyState === WebSocket.CONNECTING || ws.readyState === WebSocket.OPEN) {\n            isError = true;\n            ws.close();\n            reject(new Error('连接超时'));\n          }\n        }, 10000); // 10秒超时\n      } catch (error) {\n        console.error('发送消息错误:', error);\n        reject(error);\n      }\n    });\n  }\n\n  /**\n   * 根据情绪生成特定风格的回复\n   * @param {string} text 用户输入\n   * @param {string} emotion 情绪类型\n   * @returns {Promise<string>} 生成的回复\n   */\n  async generateResponse(text, emotion = 'neutral') {\n    try {\n      console.log(`生成回复，文本: ${text}, 情绪: ${emotion}`);\n      \n      // 构建 prompt\n      const prompt = `你是一个可爱的AI助手\"糖球\"，性格温柔活泼。请根据以下\n要求回复:\n1. 使用可爱、治愈的语气\n2. 每句话结尾加上可爱的颜文字，如(●ˇ∀ˇ●)\n3. 回复长度控制在100字以内\n4. 当前用户情绪: ${emotion}，请相应调整回复语气\n5. 可以适当使用emoji表情\n\n用户说: ${text}`;\n\n      // 发送到星火API\n      const response = await this.sendMessage(prompt, [], { temperature: 0.8 });\n      console.log('获取到AI回复:', response.content);\n      return response.content;\n    } catch (error) {\n      console.error('生成回复出错:', error);\n      // 降级处理，返回默认回复\n      return `抱歉，糖球现在有点迷糊，请稍后再试吧~ (●ˇ∀ˇ●)`;\n    }\n  }\n}\n\nexport default SparkService;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}