{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { computed, ref, onMounted, onBeforeUnmount } from 'vue';\nimport { useStore } from 'vuex';\nimport { useRouter } from 'vue-router';\nimport UserDropdown from '@/components/UserDropdown.vue';\nexport default {\n  name: 'NavigationBar',\n  components: {\n    UserDropdown\n  },\n  setup() {\n    const store = useStore();\n    const router = useRouter();\n\n    // 状态\n    const navLinks = ref([{\n      text: '首页',\n      path: '/',\n      icon: '🏠'\n    }, {\n      text: '博客',\n      path: '/blog',\n      icon: '📝'\n    }, {\n      text: '聊天助手',\n      path: '/chat',\n      icon: '🍡'\n    }, {\n      text: '小游戏',\n      path: '/games',\n      icon: '🎮'\n    }, {\n      text: '关于',\n      path: '/about',\n      icon: '✨'\n    }]);\n    const activeLink = ref('/');\n    const mobileMenuOpen = ref(false);\n\n    // 计算属性\n    const isLoggedIn = computed(() => store.getters['auth/isLoggedIn']);\n\n    // 方法\n    const setActiveLink = path => {\n      activeLink.value = path;\n    };\n    const navigateTo = path => {\n      router.push(path);\n    };\n    const navigateToMobile = path => {\n      router.push(path);\n      closeMobileMenu();\n    };\n    const toggleMobileMenu = () => {\n      mobileMenuOpen.value = !mobileMenuOpen.value;\n      // 当菜单打开时阻止body滚动\n      document.body.style.overflow = mobileMenuOpen.value ? 'hidden' : '';\n    };\n    const closeMobileMenu = () => {\n      mobileMenuOpen.value = false;\n      document.body.style.overflow = '';\n    };\n    const handleResize = () => {\n      // 如果窗口宽度大于768px，关闭移动菜单\n      if (window.innerWidth > 768 && mobileMenuOpen.value) {\n        closeMobileMenu();\n      }\n    };\n    const handleLogout = async () => {\n      try {\n        await store.dispatch('auth/logout');\n        router.push('/login');\n        closeMobileMenu();\n      } catch (error) {\n        console.error('退出登录失败:', error);\n      }\n    };\n\n    // 生命周期钩子\n    onMounted(() => {\n      // 根据当前路由设置活动链接\n      activeLink.value = router.currentRoute.value.path;\n\n      // 监听路由变化\n      router.afterEach(to => {\n        activeLink.value = to.path;\n      });\n\n      // 添加窗口大小变化事件监听\n      window.addEventListener('resize', handleResize);\n      handleResize();\n    });\n    onBeforeUnmount(() => {\n      // 移除事件监听器\n      window.removeEventListener('resize', handleResize);\n    });\n    return {\n      navLinks,\n      activeLink,\n      mobileMenuOpen,\n      isLoggedIn,\n      setActiveLink,\n      navigateTo,\n      navigateToMobile,\n      toggleMobileMenu,\n      closeMobileMenu,\n      handleLogout\n    };\n  }\n};","map":{"version":3,"names":["computed","ref","onMounted","onBeforeUnmount","useStore","useRouter","UserDropdown","name","components","setup","store","router","navLinks","text","path","icon","activeLink","mobileMenuOpen","isLoggedIn","getters","setActiveLink","value","navigateTo","push","navigateToMobile","closeMobileMenu","toggleMobileMenu","document","body","style","overflow","handleResize","window","innerWidth","handleLogout","dispatch","error","console","currentRoute","afterEach","to","addEventListener","removeEventListener"],"sources":["E:\\code\\PersonalBolg1\\frontend\\src\\components\\layout\\Navbar.vue"],"sourcesContent":["<template>\n  <nav class=\"navbar\">\n    <div class=\"container\">\n      <!-- 网站Logo -->\n      <div class=\"logo-container\">\n        <router-link to=\"/\">\n          <div class=\"logo float-animation\">\n            <img src=\"@/assets/images/logo-placeholder.png\" alt=\"甜梦星球\" />\n            <span class=\"logo-text gradient-text\">甜梦星球</span>\n          </div>\n        </router-link>\n      </div>\n      \n      <!-- 导航链接 -->\n      <div class=\"nav-links\">\n        <div v-for=\"(link, index) in navLinks\" :key=\"index\" class=\"nav-item\" \n             :class=\"{'pulse-animation': activeLink === link.path}\">\n          <router-link :to=\"link.path\" @click=\"setActiveLink(link.path)\">\n            <div class=\"cloud-link\">\n              <span class=\"link-icon\">{{ link.icon }}</span>\n              <span class=\"link-text\">{{ link.text }}</span>\n            </div>\n          </router-link>\n        </div>\n      </div>\n      \n      <!-- 登录/注册按钮 -->\n      <div class=\"auth-buttons\" v-if=\"!isLoggedIn\">\n        <button class=\"btn login-btn\" @click=\"navigateTo('/login')\">登录</button>\n        <button class=\"btn btn-primary register-btn\" @click=\"navigateTo('/register')\">注册</button>\n      </div>\n      \n      <!-- 用户头像下拉菜单 -->\n      <div v-else>\n        <UserDropdown />\n      </div>\n      \n      <!-- 移动端菜单按钮 -->\n      <div class=\"mobile-menu-btn\" @click=\"toggleMobileMenu\">\n        <div class=\"menu-icon\" :class=\"{ 'open': mobileMenuOpen }\">\n          <span></span>\n          <span></span>\n          <span></span>\n        </div>\n      </div>\n    </div>\n    \n    <!-- 移动端菜单 -->\n    <div class=\"mobile-menu\" :class=\"{ 'open': mobileMenuOpen }\">\n      <div v-for=\"(link, index) in navLinks\" :key=\"index\" class=\"mobile-nav-item\">\n        <router-link :to=\"link.path\" @click=\"closeMobileMenu\">\n          <span class=\"link-icon\">{{ link.icon }}</span>\n          <span class=\"link-text\">{{ link.text }}</span>\n        </router-link>\n      </div>\n      \n      <!-- 移动端认证按钮 -->\n      <div class=\"mobile-auth-buttons\" v-if=\"!isLoggedIn\">\n        <button class=\"btn login-btn\" @click=\"navigateToMobile('/login')\">登录</button>\n        <button class=\"btn btn-primary register-btn\" @click=\"navigateToMobile('/register')\">注册</button>\n      </div>\n      \n      <!-- 移动端用户信息 -->\n      <div class=\"mobile-user-info\" v-else>\n        <div class=\"mobile-user-avatar\" @click=\"navigateToMobile('/profile')\">\n          <UserDropdown :showUsername=\"false\" />\n        </div>\n        <div class=\"mobile-user-actions\">\n          <button class=\"mobile-action-btn\" @click=\"navigateToMobile('/profile')\">\n            <span class=\"action-icon\">👤</span>\n            <span>个人中心</span>\n          </button>\n          <button class=\"mobile-action-btn\" @click=\"handleLogout\">\n            <span class=\"action-icon\">🚪</span>\n            <span>退出登录</span>\n          </button>\n        </div>\n      </div>\n    </div>\n  </nav>\n</template>\n\n<script>\nimport { computed, ref, onMounted, onBeforeUnmount } from 'vue';\nimport { useStore } from 'vuex';\nimport { useRouter } from 'vue-router';\nimport UserDropdown from '@/components/UserDropdown.vue';\n\nexport default {\n  name: 'NavigationBar',\n  components: {\n    UserDropdown\n  },\n  setup() {\n    const store = useStore();\n    const router = useRouter();\n    \n    // 状态\n    const navLinks = ref([\n      { text: '首页', path: '/', icon: '🏠' },\n      { text: '博客', path: '/blog', icon: '📝' },\n      { text: '聊天助手', path: '/chat', icon: '🍡' },\n      { text: '小游戏', path: '/games', icon: '🎮' },\n      { text: '关于', path: '/about', icon: '✨' }\n    ]);\n    const activeLink = ref('/');\n    const mobileMenuOpen = ref(false);\n    \n    // 计算属性\n    const isLoggedIn = computed(() => store.getters['auth/isLoggedIn']);\n    \n    // 方法\n    const setActiveLink = (path) => {\n      activeLink.value = path;\n    };\n    \n    const navigateTo = (path) => {\n      router.push(path);\n    };\n    \n    const navigateToMobile = (path) => {\n      router.push(path);\n      closeMobileMenu();\n    };\n    \n    const toggleMobileMenu = () => {\n      mobileMenuOpen.value = !mobileMenuOpen.value;\n      // 当菜单打开时阻止body滚动\n      document.body.style.overflow = mobileMenuOpen.value ? 'hidden' : '';\n    };\n    \n    const closeMobileMenu = () => {\n      mobileMenuOpen.value = false;\n      document.body.style.overflow = '';\n    };\n    \n    const handleResize = () => {\n      // 如果窗口宽度大于768px，关闭移动菜单\n      if (window.innerWidth > 768 && mobileMenuOpen.value) {\n        closeMobileMenu();\n      }\n    };\n    \n    const handleLogout = async () => {\n      try {\n        await store.dispatch('auth/logout');\n        router.push('/login');\n        closeMobileMenu();\n      } catch (error) {\n        console.error('退出登录失败:', error);\n      }\n    };\n    \n    // 生命周期钩子\n    onMounted(() => {\n      // 根据当前路由设置活动链接\n      activeLink.value = router.currentRoute.value.path;\n      \n      // 监听路由变化\n      router.afterEach((to) => {\n        activeLink.value = to.path;\n      });\n      \n      // 添加窗口大小变化事件监听\n      window.addEventListener('resize', handleResize);\n      handleResize();\n    });\n    \n    onBeforeUnmount(() => {\n      // 移除事件监听器\n      window.removeEventListener('resize', handleResize);\n    });\n    \n    return {\n      navLinks,\n      activeLink,\n      mobileMenuOpen,\n      isLoggedIn,\n      setActiveLink,\n      navigateTo,\n      navigateToMobile,\n      toggleMobileMenu,\n      closeMobileMenu,\n      handleLogout\n    };\n  }\n};\n</script>\n\n<style scoped>\n.navbar {\n  position: sticky;\n  top: 0;\n  width: 100%;\n  z-index: 1000;\n  background-color: rgba(255, 255, 255, 0.9);\n  backdrop-filter: blur(10px);\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);\n  padding: 10px 0;\n}\n\n.container {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  max-width: 1200px;\n  margin: 0 auto;\n  padding: 0 20px;\n}\n\n.logo-container {\n  display: flex;\n  align-items: center;\n}\n\n.logo {\n  display: flex;\n  align-items: center;\n  gap: 10px;\n}\n\n.logo img {\n  width: 50px;\n  height: 50px;\n}\n\n.logo-text {\n  font-size: 1.5rem;\n  font-weight: bold;\n  background: linear-gradient(90deg, #FFB6C1, #87CEEB);\n  -webkit-background-clip: text;\n  -webkit-text-fill-color: transparent;\n  background-clip: text;\n}\n\n.nav-links {\n  display: flex;\n  gap: 20px;\n}\n\n.nav-item {\n  position: relative;\n}\n\n.cloud-link {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  padding: 10px 15px;\n  background-color: #E6E6FA;\n  border-radius: 25px;\n  transition: all 0.3s ease;\n}\n\n.cloud-link:hover {\n  background-color: #FFB6C1;\n  transform: translateY(-2px);\n}\n\n.link-icon {\n  font-size: 1.2rem;\n}\n\n.link-text {\n  font-weight: 500;\n}\n\n.auth-buttons {\n  display: flex;\n  gap: 10px;\n}\n\n.login-btn, .register-btn {\n  padding: 8px 15px;\n}\n\n.login-btn {\n  background: transparent;\n  border: 2px solid #FFB6C1;\n  color: #5A5A5A;\n}\n\n.mobile-menu-btn {\n  display: none;\n  cursor: pointer;\n}\n\n.menu-icon {\n  width: 30px;\n  height: 24px;\n  position: relative;\n}\n\n.menu-icon span {\n  display: block;\n  width: 100%;\n  height: 4px;\n  background-color: #FFB6C1;\n  border-radius: 4px;\n  position: absolute;\n  transition: all 0.3s ease;\n}\n\n.menu-icon span:nth-child(1) {\n  top: 0;\n}\n\n.menu-icon span:nth-child(2) {\n  top: 10px;\n}\n\n.menu-icon span:nth-child(3) {\n  top: 20px;\n}\n\n.menu-icon.open span:nth-child(1) {\n  transform: rotate(45deg);\n  top: 10px;\n}\n\n.menu-icon.open span:nth-child(2) {\n  opacity: 0;\n}\n\n.menu-icon.open span:nth-child(3) {\n  transform: rotate(-45deg);\n  top: 10px;\n}\n\n.mobile-menu {\n  display: none;\n  position: fixed;\n  top: 70px;\n  left: 0;\n  width: 100%;\n  height: 0;\n  background-color: rgba(255, 255, 255, 0.95);\n  backdrop-filter: blur(10px);\n  overflow: hidden;\n  transition: height 0.3s ease;\n  z-index: 999;\n  flex-direction: column;\n  padding: 0 20px;\n}\n\n.mobile-menu.open {\n  height: calc(100vh - 70px);\n  display: flex;\n  padding-top: 20px;\n}\n\n.mobile-nav-item {\n  margin-bottom: 15px;\n  padding: 15px;\n  background-color: #F8F9FA;\n  border-radius: 20px;\n  text-align: center;\n}\n\n.mobile-auth-buttons {\n  display: flex;\n  flex-direction: column;\n  gap: 10px;\n  margin-top: 20px;\n}\n\n.mobile-auth-buttons button {\n  width: 100%;\n}\n\n/* 响应式设计 */\n@media (max-width: 768px) {\n  .nav-links, .auth-buttons {\n    display: none;\n  }\n  \n  .mobile-menu-btn {\n    display: block;\n  }\n  \n  .container {\n    padding: 0 15px;\n  }\n}\n\n/* 活动链接样式 */\n.router-link-active .cloud-link {\n  background-color: #FFB6C1;\n  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);\n}\n\n/* 自定义动画 */\n@keyframes float {\n  0% { transform: translateY(0px); }\n  50% { transform: translateY(-10px); }\n  100% { transform: translateY(0px); }\n}\n\n.float-animation {\n  animation: float 4s ease-in-out infinite;\n}\n\n@keyframes pulse {\n  0% { transform: scale(1); }\n  50% { transform: scale(1.05); }\n  100% { transform: scale(1); }\n}\n\n.pulse-animation {\n  animation: pulse 2s ease-in-out infinite;\n}\n\n/* 移动端用户信息 */\n.mobile-user-info {\n  padding: 15px;\n  border-top: 1px solid rgba(255, 255, 255, 0.1);\n}\n\n.mobile-user-avatar {\n  margin-bottom: 15px;\n  display: flex;\n  justify-content: center;\n}\n\n.mobile-user-actions {\n  display: flex;\n  flex-direction: column;\n  gap: 10px;\n}\n\n.mobile-action-btn {\n  display: flex;\n  align-items: center;\n  gap: 10px;\n  background-color: rgba(255, 255, 255, 0.1);\n  border: none;\n  border-radius: 8px;\n  padding: 12px;\n  color: #000;\n  font-size: 14px;\n  cursor: pointer;\n  transition: background-color 0.3s;\n}\n\n.mobile-action-btn:hover {\n  background-color: rgba(255, 255, 255, 0.2);\n}\n\n.action-icon {\n  font-size: 18px;\n}\n\n/* 用户下拉菜单 */\n:deep(.el-dropdown-menu) {\n  padding: 8px 0;\n}\n\n:deep(.el-avatar) {\n  border: 2px solid #FFB6C1;\n  box-shadow: 0 0 10px rgba(255, 182, 193, 0.5);\n  transition: transform 0.3s, box-shadow 0.3s;\n}\n\n:deep(.el-avatar:hover) {\n  transform: scale(1.05);\n  box-shadow: 0 0 15px rgba(255, 182, 193, 0.7);\n}\n</style>"],"mappings":";AAmFA,SAASA,QAAQ,EAAEC,GAAG,EAAEC,SAAS,EAAEC,eAAc,QAAS,KAAK;AAC/D,SAASC,QAAO,QAAS,MAAM;AAC/B,SAASC,SAAQ,QAAS,YAAY;AACtC,OAAOC,YAAW,MAAO,+BAA+B;AAExD,eAAe;EACbC,IAAI,EAAE,eAAe;EACrBC,UAAU,EAAE;IACVF;EACF,CAAC;EACDG,KAAKA,CAAA,EAAG;IACN,MAAMC,KAAI,GAAIN,QAAQ,CAAC,CAAC;IACxB,MAAMO,MAAK,GAAIN,SAAS,CAAC,CAAC;;IAE1B;IACA,MAAMO,QAAO,GAAIX,GAAG,CAAC,CACnB;MAAEY,IAAI,EAAE,IAAI;MAAEC,IAAI,EAAE,GAAG;MAAEC,IAAI,EAAE;IAAK,CAAC,EACrC;MAAEF,IAAI,EAAE,IAAI;MAAEC,IAAI,EAAE,OAAO;MAAEC,IAAI,EAAE;IAAK,CAAC,EACzC;MAAEF,IAAI,EAAE,MAAM;MAAEC,IAAI,EAAE,OAAO;MAAEC,IAAI,EAAE;IAAK,CAAC,EAC3C;MAAEF,IAAI,EAAE,KAAK;MAAEC,IAAI,EAAE,QAAQ;MAAEC,IAAI,EAAE;IAAK,CAAC,EAC3C;MAAEF,IAAI,EAAE,IAAI;MAAEC,IAAI,EAAE,QAAQ;MAAEC,IAAI,EAAE;IAAI,EACzC,CAAC;IACF,MAAMC,UAAS,GAAIf,GAAG,CAAC,GAAG,CAAC;IAC3B,MAAMgB,cAAa,GAAIhB,GAAG,CAAC,KAAK,CAAC;;IAEjC;IACA,MAAMiB,UAAS,GAAIlB,QAAQ,CAAC,MAAMU,KAAK,CAACS,OAAO,CAAC,iBAAiB,CAAC,CAAC;;IAEnE;IACA,MAAMC,aAAY,GAAKN,IAAI,IAAK;MAC9BE,UAAU,CAACK,KAAI,GAAIP,IAAI;IACzB,CAAC;IAED,MAAMQ,UAAS,GAAKR,IAAI,IAAK;MAC3BH,MAAM,CAACY,IAAI,CAACT,IAAI,CAAC;IACnB,CAAC;IAED,MAAMU,gBAAe,GAAKV,IAAI,IAAK;MACjCH,MAAM,CAACY,IAAI,CAACT,IAAI,CAAC;MACjBW,eAAe,CAAC,CAAC;IACnB,CAAC;IAED,MAAMC,gBAAe,GAAIA,CAAA,KAAM;MAC7BT,cAAc,CAACI,KAAI,GAAI,CAACJ,cAAc,CAACI,KAAK;MAC5C;MACAM,QAAQ,CAACC,IAAI,CAACC,KAAK,CAACC,QAAO,GAAIb,cAAc,CAACI,KAAI,GAAI,QAAO,GAAI,EAAE;IACrE,CAAC;IAED,MAAMI,eAAc,GAAIA,CAAA,KAAM;MAC5BR,cAAc,CAACI,KAAI,GAAI,KAAK;MAC5BM,QAAQ,CAACC,IAAI,CAACC,KAAK,CAACC,QAAO,GAAI,EAAE;IACnC,CAAC;IAED,MAAMC,YAAW,GAAIA,CAAA,KAAM;MACzB;MACA,IAAIC,MAAM,CAACC,UAAS,GAAI,GAAE,IAAKhB,cAAc,CAACI,KAAK,EAAE;QACnDI,eAAe,CAAC,CAAC;MACnB;IACF,CAAC;IAED,MAAMS,YAAW,GAAI,MAAAA,CAAA,KAAY;MAC/B,IAAI;QACF,MAAMxB,KAAK,CAACyB,QAAQ,CAAC,aAAa,CAAC;QACnCxB,MAAM,CAACY,IAAI,CAAC,QAAQ,CAAC;QACrBE,eAAe,CAAC,CAAC;MACnB,EAAE,OAAOW,KAAK,EAAE;QACdC,OAAO,CAACD,KAAK,CAAC,SAAS,EAAEA,KAAK,CAAC;MACjC;IACF,CAAC;;IAED;IACAlC,SAAS,CAAC,MAAM;MACd;MACAc,UAAU,CAACK,KAAI,GAAIV,MAAM,CAAC2B,YAAY,CAACjB,KAAK,CAACP,IAAI;;MAEjD;MACAH,MAAM,CAAC4B,SAAS,CAAEC,EAAE,IAAK;QACvBxB,UAAU,CAACK,KAAI,GAAImB,EAAE,CAAC1B,IAAI;MAC5B,CAAC,CAAC;;MAEF;MACAkB,MAAM,CAACS,gBAAgB,CAAC,QAAQ,EAAEV,YAAY,CAAC;MAC/CA,YAAY,CAAC,CAAC;IAChB,CAAC,CAAC;IAEF5B,eAAe,CAAC,MAAM;MACpB;MACA6B,MAAM,CAACU,mBAAmB,CAAC,QAAQ,EAAEX,YAAY,CAAC;IACpD,CAAC,CAAC;IAEF,OAAO;MACLnB,QAAQ;MACRI,UAAU;MACVC,cAAc;MACdC,UAAU;MACVE,aAAa;MACbE,UAAU;MACVE,gBAAgB;MAChBE,gBAAgB;MAChBD,eAAe;MACfS;IACF,CAAC;EACH;AACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}