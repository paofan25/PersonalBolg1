{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/web.dom-exception.stack.js\";\n/**\n * æ˜Ÿç«è®¤çŸ¥å¤§æ¨¡å‹æœåŠ¡\n * ç”¨äºé›†æˆè®¯é£æ˜Ÿç«å¤§æ¨¡å‹API\n */\nimport CryptoJS from 'crypto-js';\nclass SparkService {\n  constructor() {\n    // ç›´æ¥ç¡¬ç¼–ç é…ç½®ï¼Œç¡®ä¿é…ç½®æ­£ç¡®\n    this.config = {\n      appId: 'bb840282',\n      apiKey: '178baf6c846eaeb5ea632cdab055b9cd',\n      apiSecret: 'YjMzMmE3NzczOWExZjQ3ZWI1NWY3OWJi',\n      apiUrl: 'wss://spark-api.xf-yun.com/v1.1/chat'\n    };\n    console.log('æ˜Ÿç«æœåŠ¡é…ç½®:', {\n      appId: this.config.appId,\n      apiKey: this.config.apiKey ? this.config.apiKey.substring(0, 6) + '******' : 'æœªé…ç½®',\n      apiSecret: this.config.apiSecret ? this.config.apiSecret.substring(0, 6) + '******' : 'æœªé…ç½®',\n      apiUrl: this.config.apiUrl\n    });\n  }\n\n  /**\n   * ç”Ÿæˆé‰´æƒURL\n   * @returns {string} å¸¦é‰´æƒå‚æ•°çš„WebSocket URL\n   */\n  generateAuthUrl() {\n    try {\n      const apiUrl = this.config.apiUrl;\n      const {\n        host,\n        path\n      } = this._parseUrl(apiUrl);\n      const date = new Date().toGMTString();\n      const algorithm = 'hmac-sha256';\n      const headers = 'host date request-line';\n      const signatureOrigin = `host: ${host}\\ndate: ${date}\\nGET ${path} HTTP/1.1`;\n      const signatureSha = CryptoJS.HmacSHA256(signatureOrigin, this.config.apiSecret);\n      const signature = CryptoJS.enc.Base64.stringify(signatureSha);\n      const authorizationOrigin = `api_key=\"${this.config.apiKey}\", algorithm=\"${algorithm}\", headers=\"${headers}\", signature=\"${signature}\"`;\n      const authorization = btoa(authorizationOrigin);\n      return `${apiUrl}?authorization=${authorization}&date=${date}&host=${host}`;\n    } catch (error) {\n      console.error('ç”Ÿæˆé‰´æƒURLå¤±è´¥:', error);\n      throw new Error('ç”Ÿæˆé‰´æƒURLå¤±è´¥');\n    }\n  }\n\n  /**\n   * è§£æURLè·å–hostå’Œpath\n   * @param {string} url API URL\n   * @returns {Object} åŒ…å«hostå’Œpathçš„å¯¹è±¡\n   */\n  _parseUrl(url) {\n    try {\n      const urlObj = new URL(url);\n      return {\n        host: urlObj.host,\n        path: urlObj.pathname\n      };\n    } catch (error) {\n      console.error('URLè§£æå¤±è´¥:', error);\n      throw new Error('URLè§£æå¤±è´¥');\n    }\n  }\n\n  /**\n   * å‘é€æ¶ˆæ¯åˆ°æ˜Ÿç«å¤§æ¨¡å‹\n   * @param {string} message ç”¨æˆ·æ¶ˆæ¯\n   * @param {Array} history å†å²æ¶ˆæ¯è®°å½•\n   * @param {Object} options å¯é€‰å‚æ•°\n   * @returns {Promise<Object>} å“åº”ç»“æœ\n   */\n  async sendMessage(message, history = [], options = {}) {\n    return new Promise((resolve, reject) => {\n      try {\n        const authUrl = this.generateAuthUrl();\n        console.log('è¿æ¥WebSocket:', authUrl.substring(0, 60) + '...');\n        const ws = new WebSocket(authUrl);\n        let response = '';\n        let isError = false;\n        ws.onopen = () => {\n          console.log('æ˜Ÿç«WebSocketè¿æ¥å·²å»ºç«‹');\n\n          // æ„å»ºæ¶ˆæ¯å†å²\n          const messages = [...history];\n          // æ·»åŠ å½“å‰ç”¨æˆ·æ¶ˆæ¯\n          messages.push({\n            role: 'user',\n            content: message\n          });\n\n          // æ„å»ºè¯·æ±‚æ•°æ®\n          const requestData = {\n            header: {\n              app_id: this.config.appId,\n              uid: `user_${Date.now()}`\n            },\n            parameter: {\n              chat: {\n                domain: options.domain || 'lite',\n                temperature: options.temperature || 0.7,\n                max_tokens: options.maxTokens || 1024\n              }\n            },\n            payload: {\n              message: {\n                text: messages\n              }\n            }\n          };\n          console.log('å‘é€è¯·æ±‚æ•°æ®:', JSON.stringify(requestData).substring(0, 100) + '...');\n          // å‘é€è¯·æ±‚\n          ws.send(JSON.stringify(requestData));\n        };\n        ws.onmessage = event => {\n          try {\n            const data = JSON.parse(event.data);\n            console.log('æ”¶åˆ°å“åº”:', JSON.stringify(data).substring(0, 100) + '...');\n\n            // æ£€æŸ¥æ˜¯å¦æœ‰é”™è¯¯\n            if (data.header.code !== 0) {\n              isError = true;\n              ws.close();\n              reject(new Error(`é”™è¯¯ç : ${data.header.code}, é”™è¯¯ä¿¡æ¯: ${data.header.message}`));\n              return;\n            }\n\n            // è·å–å›å¤å†…å®¹\n            if (data.payload && data.payload.choices && data.payload.choices.text) {\n              const content = data.payload.choices.text[0].content;\n              response += content;\n            }\n\n            // æ£€æŸ¥æ˜¯å¦ç»“æŸ\n            if (data.header.status === 2) {\n              ws.close();\n              resolve({\n                content: response,\n                status: 'success'\n              });\n            }\n          } catch (e) {\n            console.error('å¤„ç†WebSocketæ¶ˆæ¯é”™è¯¯:', e);\n            isError = true;\n            ws.close();\n            reject(new Error('å¤„ç†å“åº”æ•°æ®å¤±è´¥'));\n          }\n        };\n        ws.onerror = error => {\n          console.error('WebSocketè¿æ¥é”™è¯¯:', error);\n          isError = true;\n          reject(error);\n        };\n        ws.onclose = () => {\n          console.log('WebSocketè¿æ¥å·²å…³é—­');\n          if (!isError && !response) {\n            reject(new Error('WebSocketè¿æ¥å…³é—­ä½†æœªæ”¶åˆ°å“åº”'));\n          }\n        };\n\n        // è®¾ç½®è¿æ¥è¶…æ—¶\n        setTimeout(() => {\n          if (ws.readyState === WebSocket.CONNECTING || ws.readyState === WebSocket.OPEN) {\n            isError = true;\n            ws.close();\n            reject(new Error('è¿æ¥è¶…æ—¶'));\n          }\n        }, 10000); // 10ç§’è¶…æ—¶\n      } catch (error) {\n        console.error('å‘é€æ¶ˆæ¯é”™è¯¯:', error);\n        reject(error);\n      }\n    });\n  }\n\n  /**\n   * æ ¹æ®æƒ…ç»ªç”Ÿæˆç‰¹å®šé£æ ¼çš„å›å¤\n   * @param {string} text ç”¨æˆ·è¾“å…¥\n   * @param {string} emotion æƒ…ç»ªç±»å‹\n   * @returns {Promise<string>} ç”Ÿæˆçš„å›å¤\n   */\n  async generateResponse(text, emotion = 'neutral') {\n    try {\n      console.log(`ç”Ÿæˆå›å¤ï¼Œæ–‡æœ¬: ${text}, æƒ…ç»ª: ${emotion}`);\n\n      // æ„å»º prompt\n      const prompt = `ä½ æ˜¯ä¸€ä¸ªå¯çˆ±çš„AIåŠ©æ‰‹\"ç³–çƒ\"ï¼Œæ€§æ ¼æ¸©æŸ”æ´»æ³¼ã€‚è¯·æ ¹æ®ä»¥ä¸‹\nè¦æ±‚å›å¤:\n1. ä½¿ç”¨å¯çˆ±ã€æ²»æ„ˆçš„è¯­æ°”\n2. æ¯å¥è¯ç»“å°¾åŠ ä¸Šå¯çˆ±çš„é¢œæ–‡å­—ï¼Œå¦‚(â—â€¢á´—â€¢â—)ã€(à¹‘â€¢Ì€ã…‚â€¢Ì)Ùˆâœ§\n3. å›å¤é•¿åº¦æ§åˆ¶åœ¨100å­—ä»¥å†…\n4. å½“å‰ç”¨æˆ·æƒ…ç»ª: ${emotion}ï¼Œè¯·ç›¸åº”è°ƒæ•´å›å¤è¯­æ°”\n5. å¯ä»¥ä½¿ç”¨emojiè¡¨æƒ…å¦‚ğŸ˜ŠğŸ˜ğŸŒˆğŸ’•\n6. ä¸è¦ç”¨æ‹¬å·()è¡¨ç¤ºåŠ¨ä½œï¼Œç›´æ¥ç”¨æ–‡å­—è¡¨è¾¾\n\nç”¨æˆ·è¯´: ${text}`;\n\n      // å‘é€åˆ°æ˜Ÿç«API\n      const response = await this.sendMessage(prompt, [], {\n        temperature: 0.8\n      });\n      console.log('è·å–åˆ°AIå›å¤:', response.content);\n      return response.content;\n    } catch (error) {\n      console.error('ç”Ÿæˆå›å¤å‡ºé”™:', error);\n      // é™çº§å¤„ç†ï¼Œè¿”å›é»˜è®¤å›å¤\n      return `æŠ±æ­‰ï¼Œç³–çƒç°åœ¨æœ‰ç‚¹è¿·ç³Šï¼Œè¯·ç¨åå†è¯•å§~ (â—â€¢á´—â€¢â—)`;\n    }\n  }\n}\nexport default SparkService;","map":{"version":3,"names":["CryptoJS","SparkService","constructor","config","appId","apiKey","apiSecret","apiUrl","console","log","substring","generateAuthUrl","host","path","_parseUrl","date","Date","toGMTString","algorithm","headers","signatureOrigin","signatureSha","HmacSHA256","signature","enc","Base64","stringify","authorizationOrigin","authorization","btoa","error","Error","url","urlObj","URL","pathname","sendMessage","message","history","options","Promise","resolve","reject","authUrl","ws","WebSocket","response","isError","onopen","messages","push","role","content","requestData","header","app_id","uid","now","parameter","chat","domain","temperature","max_tokens","maxTokens","payload","text","JSON","send","onmessage","event","data","parse","code","close","choices","status","e","onerror","onclose","setTimeout","readyState","CONNECTING","OPEN","generateResponse","emotion","prompt"],"sources":["E:/code/PersonalBolg1/frontend/src/services/sparkAI.js"],"sourcesContent":["/**\n * æ˜Ÿç«è®¤çŸ¥å¤§æ¨¡å‹æœåŠ¡\n * ç”¨äºé›†æˆè®¯é£æ˜Ÿç«å¤§æ¨¡å‹API\n */\nimport CryptoJS from 'crypto-js';\n\nclass SparkService {\n  constructor() {\n    // ç›´æ¥ç¡¬ç¼–ç é…ç½®ï¼Œç¡®ä¿é…ç½®æ­£ç¡®\n    this.config = {\n      appId: 'bb840282',\n      apiKey: '178baf6c846eaeb5ea632cdab055b9cd',\n      apiSecret: 'YjMzMmE3NzczOWExZjQ3ZWI1NWY3OWJi',\n      apiUrl: 'wss://spark-api.xf-yun.com/v1.1/chat'\n    };\n    \n    console.log('æ˜Ÿç«æœåŠ¡é…ç½®:', {\n      appId: this.config.appId,\n      apiKey: this.config.apiKey ? this.config.apiKey.substring(0, 6) + '******' : 'æœªé…ç½®',\n      apiSecret: this.config.apiSecret ? this.config.apiSecret.substring(0, 6) + '******' : 'æœªé…ç½®',\n      apiUrl: this.config.apiUrl\n    });\n  }\n\n  /**\n   * ç”Ÿæˆé‰´æƒURL\n   * @returns {string} å¸¦é‰´æƒå‚æ•°çš„WebSocket URL\n   */\n  generateAuthUrl() {\n    try {\n      const apiUrl = this.config.apiUrl;\n      const { host, path } = this._parseUrl(apiUrl);\n      const date = new Date().toGMTString();\n      const algorithm = 'hmac-sha256';\n      const headers = 'host date request-line';\n      const signatureOrigin = `host: ${host}\\ndate: ${date}\\nGET ${path} HTTP/1.1`;\n      const signatureSha = CryptoJS.HmacSHA256(signatureOrigin, this.config.apiSecret);\n      const signature = CryptoJS.enc.Base64.stringify(signatureSha);\n      const authorizationOrigin = `api_key=\"${this.config.apiKey}\", algorithm=\"${algorithm}\", headers=\"${headers}\", signature=\"${signature}\"`;\n      const authorization = btoa(authorizationOrigin);\n\n      return `${apiUrl}?authorization=${authorization}&date=${date}&host=${host}`;\n    } catch (error) {\n      console.error('ç”Ÿæˆé‰´æƒURLå¤±è´¥:', error);\n      throw new Error('ç”Ÿæˆé‰´æƒURLå¤±è´¥');\n    }\n  }\n\n  /**\n   * è§£æURLè·å–hostå’Œpath\n   * @param {string} url API URL\n   * @returns {Object} åŒ…å«hostå’Œpathçš„å¯¹è±¡\n   */\n  _parseUrl(url) {\n    try {\n      const urlObj = new URL(url);\n      return {\n        host: urlObj.host,\n        path: urlObj.pathname\n      };\n    } catch (error) {\n      console.error('URLè§£æå¤±è´¥:', error);\n      throw new Error('URLè§£æå¤±è´¥');\n    }\n  }\n\n  /**\n   * å‘é€æ¶ˆæ¯åˆ°æ˜Ÿç«å¤§æ¨¡å‹\n   * @param {string} message ç”¨æˆ·æ¶ˆæ¯\n   * @param {Array} history å†å²æ¶ˆæ¯è®°å½•\n   * @param {Object} options å¯é€‰å‚æ•°\n   * @returns {Promise<Object>} å“åº”ç»“æœ\n   */\n  async sendMessage(message, history = [], options = {}) {\n    return new Promise((resolve, reject) => {\n      try {\n        const authUrl = this.generateAuthUrl();\n        console.log('è¿æ¥WebSocket:', authUrl.substring(0, 60) + '...');\n        \n        const ws = new WebSocket(authUrl);\n        let response = '';\n        let isError = false;\n        \n        ws.onopen = () => {\n          console.log('æ˜Ÿç«WebSocketè¿æ¥å·²å»ºç«‹');\n          \n          // æ„å»ºæ¶ˆæ¯å†å²\n          const messages = [...history];\n          // æ·»åŠ å½“å‰ç”¨æˆ·æ¶ˆæ¯\n          messages.push({ role: 'user', content: message });\n          \n          // æ„å»ºè¯·æ±‚æ•°æ®\n          const requestData = {\n            header: {\n              app_id: this.config.appId,\n              uid: `user_${Date.now()}`\n            },\n            parameter: {\n              chat: {\n                domain: options.domain || 'lite',\n                temperature: options.temperature || 0.7,\n                max_tokens: options.maxTokens || 1024\n              }\n            },\n            payload: {\n              message: {\n                text: messages\n              }\n            }\n          };\n          \n          console.log('å‘é€è¯·æ±‚æ•°æ®:', JSON.stringify(requestData).substring(0, 100) + '...');\n          // å‘é€è¯·æ±‚\n          ws.send(JSON.stringify(requestData));\n        };\n        \n        ws.onmessage = (event) => {\n          try {\n            const data = JSON.parse(event.data);\n            console.log('æ”¶åˆ°å“åº”:', JSON.stringify(data).substring(0, 100) + '...');\n            \n            // æ£€æŸ¥æ˜¯å¦æœ‰é”™è¯¯\n            if (data.header.code !== 0) {\n              isError = true;\n              ws.close();\n              reject(new Error(`é”™è¯¯ç : ${data.header.code}, é”™è¯¯ä¿¡æ¯: ${data.header.message}`));\n              return;\n            }\n            \n            // è·å–å›å¤å†…å®¹\n            if (data.payload && data.payload.choices && data.payload.choices.text) {\n              const content = data.payload.choices.text[0].content;\n              response += content;\n            }\n            \n            // æ£€æŸ¥æ˜¯å¦ç»“æŸ\n            if (data.header.status === 2) {\n              ws.close();\n              resolve({ content: response, status: 'success' });\n            }\n          } catch (e) {\n            console.error('å¤„ç†WebSocketæ¶ˆæ¯é”™è¯¯:', e);\n            isError = true;\n            ws.close();\n            reject(new Error('å¤„ç†å“åº”æ•°æ®å¤±è´¥'));\n          }\n        };\n        \n        ws.onerror = (error) => {\n          console.error('WebSocketè¿æ¥é”™è¯¯:', error);\n          isError = true;\n          reject(error);\n        };\n        \n        ws.onclose = () => {\n          console.log('WebSocketè¿æ¥å·²å…³é—­');\n          if (!isError && !response) {\n            reject(new Error('WebSocketè¿æ¥å…³é—­ä½†æœªæ”¶åˆ°å“åº”'));\n          }\n        };\n        \n        // è®¾ç½®è¿æ¥è¶…æ—¶\n        setTimeout(() => {\n          if (ws.readyState === WebSocket.CONNECTING || ws.readyState === WebSocket.OPEN) {\n            isError = true;\n            ws.close();\n            reject(new Error('è¿æ¥è¶…æ—¶'));\n          }\n        }, 10000); // 10ç§’è¶…æ—¶\n      } catch (error) {\n        console.error('å‘é€æ¶ˆæ¯é”™è¯¯:', error);\n        reject(error);\n      }\n    });\n  }\n\n  /**\n   * æ ¹æ®æƒ…ç»ªç”Ÿæˆç‰¹å®šé£æ ¼çš„å›å¤\n   * @param {string} text ç”¨æˆ·è¾“å…¥\n   * @param {string} emotion æƒ…ç»ªç±»å‹\n   * @returns {Promise<string>} ç”Ÿæˆçš„å›å¤\n   */\n  async generateResponse(text, emotion = 'neutral') {\n    try {\n      console.log(`ç”Ÿæˆå›å¤ï¼Œæ–‡æœ¬: ${text}, æƒ…ç»ª: ${emotion}`);\n      \n      // æ„å»º prompt\n      const prompt = `ä½ æ˜¯ä¸€ä¸ªå¯çˆ±çš„AIåŠ©æ‰‹\"ç³–çƒ\"ï¼Œæ€§æ ¼æ¸©æŸ”æ´»æ³¼ã€‚è¯·æ ¹æ®ä»¥ä¸‹\nè¦æ±‚å›å¤:\n1. ä½¿ç”¨å¯çˆ±ã€æ²»æ„ˆçš„è¯­æ°”\n2. æ¯å¥è¯ç»“å°¾åŠ ä¸Šå¯çˆ±çš„é¢œæ–‡å­—ï¼Œå¦‚(â—â€¢á´—â€¢â—)ã€(à¹‘â€¢Ì€ã…‚â€¢Ì)Ùˆâœ§\n3. å›å¤é•¿åº¦æ§åˆ¶åœ¨100å­—ä»¥å†…\n4. å½“å‰ç”¨æˆ·æƒ…ç»ª: ${emotion}ï¼Œè¯·ç›¸åº”è°ƒæ•´å›å¤è¯­æ°”\n5. å¯ä»¥ä½¿ç”¨emojiè¡¨æƒ…å¦‚ğŸ˜ŠğŸ˜ğŸŒˆğŸ’•\n6. ä¸è¦ç”¨æ‹¬å·()è¡¨ç¤ºåŠ¨ä½œï¼Œç›´æ¥ç”¨æ–‡å­—è¡¨è¾¾\n\nç”¨æˆ·è¯´: ${text}`;\n\n      // å‘é€åˆ°æ˜Ÿç«API\n      const response = await this.sendMessage(prompt, [], { temperature: 0.8 });\n      console.log('è·å–åˆ°AIå›å¤:', response.content);\n      return response.content;\n    } catch (error) {\n      console.error('ç”Ÿæˆå›å¤å‡ºé”™:', error);\n      // é™çº§å¤„ç†ï¼Œè¿”å›é»˜è®¤å›å¤\n      return `æŠ±æ­‰ï¼Œç³–çƒç°åœ¨æœ‰ç‚¹è¿·ç³Šï¼Œè¯·ç¨åå†è¯•å§~ (â—â€¢á´—â€¢â—)`;\n    }\n  }\n}\n\nexport default SparkService;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}