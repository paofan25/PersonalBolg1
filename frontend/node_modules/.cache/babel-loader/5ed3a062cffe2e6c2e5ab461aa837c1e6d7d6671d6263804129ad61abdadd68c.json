{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { computed } from 'vue';\nimport { useStore } from 'vuex';\nimport { useRouter } from 'vue-router';\nimport { User, Setting, SwitchButton } from '@element-plus/icons-vue';\nexport default {\n  name: 'UserDropdown',\n  components: {\n    User,\n    Setting,\n    SwitchButton\n  },\n  setup() {\n    const store = useStore();\n    const router = useRouter();\n    const username = computed(() => store.state.auth.user?.username || '用户');\n    const userAvatar = computed(() => store.state.auth.user?.avatar || '');\n    const userInitial = computed(() => username.value.charAt(0).toUpperCase());\n    const goToProfile = () => {\n      router.push('/profile');\n    };\n    const goToSettings = () => {\n      router.push('/settings');\n    };\n    const handleLogout = async () => {\n      try {\n        await store.dispatch('auth/logout');\n        router.push('/login');\n      } catch (error) {\n        console.error('退出登录失败:', error);\n      }\n    };\n    return {\n      username,\n      userAvatar,\n      userInitial,\n      goToProfile,\n      goToSettings,\n      handleLogout\n    };\n  }\n};","map":{"version":3,"names":["computed","useStore","useRouter","User","Setting","SwitchButton","name","components","setup","store","router","username","state","auth","user","userAvatar","avatar","userInitial","value","charAt","toUpperCase","goToProfile","push","goToSettings","handleLogout","dispatch","error","console"],"sources":["E:\\code\\PersonalBolg1\\frontend\\src\\components\\UserDropdown.vue"],"sourcesContent":["<template>\r\n  <el-dropdown class=\"user-dropdown\" trigger=\"click\">\r\n    <div class=\"user-info\">\r\n      <el-avatar :size=\"32\" :src=\"userAvatar\">\r\n        {{ userInitial }}\r\n      </el-avatar>\r\n      <span class=\"username\">{{ username }}</span>\r\n    </div>\r\n    \r\n    <template #dropdown>\r\n      <el-dropdown-menu>\r\n        <el-dropdown-item @click=\"goToProfile\">\r\n          <el-icon><User /></el-icon>\r\n          个人中心\r\n        </el-dropdown-item>\r\n        <el-dropdown-item @click=\"goToSettings\">\r\n          <el-icon><Setting /></el-icon>\r\n          设置\r\n        </el-dropdown-item>\r\n        <el-dropdown-item divided @click=\"handleLogout\">\r\n          <el-icon><SwitchButton /></el-icon>\r\n          退出登录\r\n        </el-dropdown-item>\r\n      </el-dropdown-menu>\r\n    </template>\r\n  </el-dropdown>\r\n</template>\r\n\r\n<script>\r\nimport { computed } from 'vue'\r\nimport { useStore } from 'vuex'\r\nimport { useRouter } from 'vue-router'\r\nimport { User, Setting, SwitchButton } from '@element-plus/icons-vue'\r\n\r\nexport default {\r\n  name: 'UserDropdown',\r\n  components: {\r\n    User,\r\n    Setting,\r\n    SwitchButton\r\n  },\r\n  setup() {\r\n    const store = useStore()\r\n    const router = useRouter()\r\n\r\n    const username = computed(() => store.state.auth.user?.username || '用户')\r\n    const userAvatar = computed(() => store.state.auth.user?.avatar || '')\r\n    const userInitial = computed(() => username.value.charAt(0).toUpperCase())\r\n\r\n    const goToProfile = () => {\r\n      router.push('/profile')\r\n    }\r\n\r\n    const goToSettings = () => {\r\n      router.push('/settings')\r\n    }\r\n\r\n    const handleLogout = async () => {\r\n      try {\r\n        await store.dispatch('auth/logout')\r\n        router.push('/login')\r\n      } catch (error) {\r\n        console.error('退出登录失败:', error)\r\n      }\r\n    }\r\n\r\n    return {\r\n      username,\r\n      userAvatar,\r\n      userInitial,\r\n      goToProfile,\r\n      goToSettings,\r\n      handleLogout\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.user-dropdown {\r\n  cursor: pointer;\r\n}\r\n\r\n.user-info {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 8px;\r\n}\r\n\r\n.username {\r\n  font-size: 14px;\r\n  color: var(--text-color);\r\n}\r\n\r\n:deep(.el-dropdown-menu__item) {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 8px;\r\n}\r\n\r\n:deep(.el-icon) {\r\n  margin-right: 4px;\r\n}\r\n</style> "],"mappings":";AA6BA,SAASA,QAAO,QAAS,KAAI;AAC7B,SAASC,QAAO,QAAS,MAAK;AAC9B,SAASC,SAAQ,QAAS,YAAW;AACrC,SAASC,IAAI,EAAEC,OAAO,EAAEC,YAAW,QAAS,yBAAwB;AAEpE,eAAe;EACbC,IAAI,EAAE,cAAc;EACpBC,UAAU,EAAE;IACVJ,IAAI;IACJC,OAAO;IACPC;EACF,CAAC;EACDG,KAAKA,CAAA,EAAG;IACN,MAAMC,KAAI,GAAIR,QAAQ,CAAC;IACvB,MAAMS,MAAK,GAAIR,SAAS,CAAC;IAEzB,MAAMS,QAAO,GAAIX,QAAQ,CAAC,MAAMS,KAAK,CAACG,KAAK,CAACC,IAAI,CAACC,IAAI,EAAEH,QAAO,IAAK,IAAI;IACvE,MAAMI,UAAS,GAAIf,QAAQ,CAAC,MAAMS,KAAK,CAACG,KAAK,CAACC,IAAI,CAACC,IAAI,EAAEE,MAAK,IAAK,EAAE;IACrE,MAAMC,WAAU,GAAIjB,QAAQ,CAAC,MAAMW,QAAQ,CAACO,KAAK,CAACC,MAAM,CAAC,CAAC,CAAC,CAACC,WAAW,CAAC,CAAC;IAEzE,MAAMC,WAAU,GAAIA,CAAA,KAAM;MACxBX,MAAM,CAACY,IAAI,CAAC,UAAU;IACxB;IAEA,MAAMC,YAAW,GAAIA,CAAA,KAAM;MACzBb,MAAM,CAACY,IAAI,CAAC,WAAW;IACzB;IAEA,MAAME,YAAW,GAAI,MAAAA,CAAA,KAAY;MAC/B,IAAI;QACF,MAAMf,KAAK,CAACgB,QAAQ,CAAC,aAAa;QAClCf,MAAM,CAACY,IAAI,CAAC,QAAQ;MACtB,EAAE,OAAOI,KAAK,EAAE;QACdC,OAAO,CAACD,KAAK,CAAC,SAAS,EAAEA,KAAK;MAChC;IACF;IAEA,OAAO;MACLf,QAAQ;MACRI,UAAU;MACVE,WAAW;MACXI,WAAW;MACXE,YAAY;MACZC;IACF;EACF;AACF","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}