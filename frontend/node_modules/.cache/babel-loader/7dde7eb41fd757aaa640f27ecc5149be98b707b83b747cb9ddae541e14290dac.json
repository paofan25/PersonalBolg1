{"ast":null,"code":"import { createElementVNode as _createElementVNode, resolveComponent as _resolveComponent, createVNode as _createVNode, withCtx as _withCtx, createTextVNode as _createTextVNode, withModifiers as _withModifiers, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\";\nconst _hoisted_1 = {\n  class: \"login-container\"\n};\nconst _hoisted_2 = {\n  class: \"login-links\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_Message = _resolveComponent(\"Message\");\n  const _component_el_icon = _resolveComponent(\"el-icon\");\n  const _component_el_input = _resolveComponent(\"el-input\");\n  const _component_el_form_item = _resolveComponent(\"el-form-item\");\n  const _component_Lock = _resolveComponent(\"Lock\");\n  const _component_el_button = _resolveComponent(\"el-button\");\n  const _component_el_form = _resolveComponent(\"el-form\");\n  const _component_router_link = _resolveComponent(\"router-link\");\n  const _component_el_card = _resolveComponent(\"el-card\");\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createVNode(_component_el_card, {\n    class: \"login-card\"\n  }, {\n    header: _withCtx(() => _cache[2] || (_cache[2] = [_createElementVNode(\"h2\", {\n      class: \"login-title\"\n    }, \"登录\", -1 /* HOISTED */)])),\n    default: _withCtx(() => [_createVNode(_component_el_form, {\n      ref: \"formRef\",\n      model: $setup.loginForm,\n      rules: $setup.rules,\n      \"label-position\": \"top\",\n      onSubmit: _withModifiers($setup.handleLogin, [\"prevent\"])\n    }, {\n      default: _withCtx(() => [_createVNode(_component_el_form_item, {\n        label: \"邮箱\",\n        prop: \"email\"\n      }, {\n        default: _withCtx(() => [_createVNode(_component_el_input, {\n          modelValue: $setup.loginForm.email,\n          \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $setup.loginForm.email = $event),\n          placeholder: \"请输入邮箱\"\n        }, {\n          prefix: _withCtx(() => [_createVNode(_component_el_icon, null, {\n            default: _withCtx(() => [_createVNode(_component_Message)]),\n            _: 1 /* STABLE */\n          })]),\n          _: 1 /* STABLE */\n        }, 8 /* PROPS */, [\"modelValue\"])]),\n        _: 1 /* STABLE */\n      }), _createVNode(_component_el_form_item, {\n        label: \"密码\",\n        prop: \"password\"\n      }, {\n        default: _withCtx(() => [_createVNode(_component_el_input, {\n          modelValue: $setup.loginForm.password,\n          \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $setup.loginForm.password = $event),\n          type: \"password\",\n          placeholder: \"请输入密码\",\n          \"show-password\": \"\"\n        }, {\n          prefix: _withCtx(() => [_createVNode(_component_el_icon, null, {\n            default: _withCtx(() => [_createVNode(_component_Lock)]),\n            _: 1 /* STABLE */\n          })]),\n          _: 1 /* STABLE */\n        }, 8 /* PROPS */, [\"modelValue\"])]),\n        _: 1 /* STABLE */\n      }), _createVNode(_component_el_form_item, null, {\n        default: _withCtx(() => [_createVNode(_component_el_button, {\n          type: \"primary\",\n          \"native-type\": \"submit\",\n          loading: $setup.isLoading,\n          class: \"login-button\"\n        }, {\n          default: _withCtx(() => _cache[3] || (_cache[3] = [_createTextVNode(\" 登录 \")])),\n          _: 1 /* STABLE */\n        }, 8 /* PROPS */, [\"loading\"])]),\n        _: 1 /* STABLE */\n      })]),\n      _: 1 /* STABLE */\n    }, 8 /* PROPS */, [\"model\", \"rules\", \"onSubmit\"]), _createElementVNode(\"div\", _hoisted_2, [_createVNode(_component_router_link, {\n      to: \"/forgot-password\"\n    }, {\n      default: _withCtx(() => _cache[4] || (_cache[4] = [_createTextVNode(\"忘记密码？\")])),\n      _: 1 /* STABLE */\n    }), _createVNode(_component_router_link, {\n      to: \"/register\"\n    }, {\n      default: _withCtx(() => _cache[5] || (_cache[5] = [_createTextVNode(\"注册新账号\")])),\n      _: 1 /* STABLE */\n    })])]),\n    _: 1 /* STABLE */\n  })]);\n}","map":{"version":3,"names":["class","_createElementBlock","_hoisted_1","_createVNode","_component_el_card","header","_withCtx","_cache","_createElementVNode","default","_component_el_form","ref","model","$setup","loginForm","rules","onSubmit","_withModifiers","handleLogin","_component_el_form_item","label","prop","_component_el_input","modelValue","email","$event","placeholder","prefix","_component_el_icon","_component_Message","_","password","type","_component_Lock","_component_el_button","loading","isLoading","_createTextVNode","_hoisted_2","_component_router_link","to"],"sources":["E:\\code\\PersonalBolg1\\frontend\\src\\views\\LoginView.vue"],"sourcesContent":["<template>\n  <div class=\"login-container\">\n    <el-card class=\"login-card\">\n      <template #header>\n        <h2 class=\"login-title\">登录</h2>\n      </template>\n      \n      <el-form \n        ref=\"formRef\"\n        :model=\"loginForm\"\n        :rules=\"rules\"\n        label-position=\"top\"\n        @submit.prevent=\"handleLogin\"\n      >\n        <el-form-item label=\"邮箱\" prop=\"email\">\n          <el-input \n            v-model=\"loginForm.email\"\n            placeholder=\"请输入邮箱\"\n          >\n            <template #prefix>\n              <el-icon><Message /></el-icon>\n            </template>\n          </el-input>\n        </el-form-item>\n        \n        <el-form-item label=\"密码\" prop=\"password\">\n          <el-input \n            v-model=\"loginForm.password\"\n            type=\"password\" \n            placeholder=\"请输入密码\"\n            show-password\n          >\n            <template #prefix>\n              <el-icon><Lock /></el-icon>\n            </template>\n          </el-input>\n        </el-form-item>\n        \n        <el-form-item>\n          <el-button \n            type=\"primary\" \n            native-type=\"submit\"\n            :loading=\"isLoading\"\n            class=\"login-button\"\n          >\n            登录\n          </el-button>\n        </el-form-item>\n      </el-form>\n      \n      <div class=\"login-links\">\n        <router-link to=\"/forgot-password\">忘记密码？</router-link>\n        <router-link to=\"/register\">注册新账号</router-link>\n      </div>\n    </el-card>\n  </div>\n</template>\n\n<script>\nimport { ref } from 'vue'\nimport { useStore } from 'vuex'\nimport { useRouter } from 'vue-router'\nimport { Message, Lock } from '@element-plus/icons-vue'\nimport { ElMessage } from 'element-plus'\n\nexport default {\n  name: 'LoginView',\n  components: {\n    Message,\n    Lock\n  },\n  setup() {\n    const store = useStore()\n    const router = useRouter()\n    const formRef = ref(null)\n    const isLoading = ref(false)\n    \n    const loginForm = ref({\n      email: '',\n      password: ''\n    })\n    \n    const rules = {\n      email: [\n        { required: true, message: '请输入邮箱', trigger: 'blur' },\n        { type: 'email', message: '请输入正确的邮箱格式', trigger: 'blur' }\n      ],\n      password: [\n        { required: true, message: '请输入密码', trigger: 'blur' },\n        { min: 6, message: '密码至少6个字符', trigger: 'blur' }\n      ]\n    }\n    \n    const handleLogin = async () => {\n      if (!formRef.value) return\n      \n      await formRef.value.validate(async (valid) => {\n        if (valid) {\n          try {\n            isLoading.value = true\n            const result = await store.dispatch('auth/login', loginForm.value)\n            ElMessage({\n              type: 'success',\n              message: '登录成功！'\n            })\n\n            if (result && result.redirectTo) {\n              router.push(result.redirectTo)\n            } else {\n              router.push('/')\n            }\n            \n            if (result && result.infoError) {\n              ElMessage({\n                type: 'warning',\n                message: `用户信息获取不完整: ${result.infoError}，部分功能可能受限`\n              })\n            }\n          } catch (error) {\n            ElMessage({\n              type: 'error',\n              message: error.message || '登录失败，请重试'\n            })\n          } finally {\n            isLoading.value = false\n          }\n        }\n      })\n    }\n    \n    return {\n      formRef,\n      loginForm,\n      isLoading,\n      rules,\n      handleLogin\n    }\n  }\n}\n</script>\n\n<style scoped>\n.login-container {\n  min-height: 100vh;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background-color: var(--background-color);\n}\n\n.login-card {\n  width: 100%;\n  max-width: 400px;\n  margin: 20px;\n}\n\n.login-title {\n  text-align: center;\n  color: var(--text-color);\n  margin: 0;\n}\n\n.login-button {\n  width: 100%;\n}\n\n.login-links {\n  margin-top: 20px;\n  display: flex;\n  justify-content: space-between;\n  font-size: 14px;\n}\n\n.login-links a {\n  color: var(--primary-color);\n  text-decoration: none;\n}\n\n.login-links a:hover {\n  text-decoration: underline;\n}\n\n:deep(.el-input__prefix) {\n  display: flex;\n  align-items: center;\n}\n</style>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}