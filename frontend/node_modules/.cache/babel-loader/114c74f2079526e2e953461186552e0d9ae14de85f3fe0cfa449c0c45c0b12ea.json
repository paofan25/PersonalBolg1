{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { ref, reactive } from 'vue';\nimport { useStore } from 'vuex';\nimport { useRouter } from 'vue-router';\nexport default {\n  name: 'RegisterView',\n  setup() {\n    const store = useStore();\n    const router = useRouter();\n    const username = ref('');\n    const email = ref('');\n    const password = ref('');\n    const confirmPassword = ref('');\n    const agreeTerms = ref(false);\n    const showPassword = ref(false);\n    const isLoading = ref(false);\n    const errors = reactive({\n      username: '',\n      email: '',\n      password: '',\n      confirmPassword: '',\n      terms: ''\n    });\n    const validateForm = () => {\n      let isValid = true;\n      errors.username = '';\n      errors.email = '';\n      errors.password = '';\n      errors.confirmPassword = '';\n      errors.terms = '';\n      if (!username.value) {\n        errors.username = '请输入用户名';\n        isValid = false;\n      } else if (username.value.length < 2) {\n        errors.username = '用户名至少需要2个字符';\n        isValid = false;\n      }\n      if (!email.value) {\n        errors.email = '请输入邮箱地址';\n        isValid = false;\n      } else if (!/\\S+@\\S+\\.\\S+/.test(email.value)) {\n        errors.email = '请输入有效的邮箱地址';\n        isValid = false;\n      }\n      if (!password.value) {\n        errors.password = '请输入密码';\n        isValid = false;\n      } else if (password.value.length < 6) {\n        errors.password = '密码至少需要6个字符';\n        isValid = false;\n      }\n      if (!confirmPassword.value) {\n        errors.confirmPassword = '请确认密码';\n        isValid = false;\n      } else if (confirmPassword.value !== password.value) {\n        errors.confirmPassword = '两次输入的密码不一致';\n        isValid = false;\n      }\n      if (!agreeTerms.value) {\n        errors.terms = '请同意服务条款和隐私政策';\n        isValid = false;\n      }\n      return isValid;\n    };\n    const handleRegister = async () => {\n      if (!validateForm()) return;\n      isLoading.value = true;\n      try {\n        const result = await store.dispatch('auth/register', {\n          username: username.value,\n          email: email.value,\n          password: password.value\n        });\n        if (result && result.redirectTo) {\n          console.log('注册成功，重定向到:', result.redirectTo);\n          router.push(result.redirectTo);\n        } else {\n          console.log('注册成功，但没有重定向信息');\n          router.push('/profile');\n        }\n      } catch (error) {\n        console.error('注册出错:', error);\n        if (error.response?.data?.message) {\n          errors.email = error.response.data.message;\n        } else {\n          errors.email = error.message || '注册失败，请稍后重试';\n        }\n      } finally {\n        isLoading.value = false;\n      }\n    };\n    const togglePassword = () => {\n      showPassword.value = !showPassword.value;\n    };\n    return {\n      username,\n      email,\n      password,\n      confirmPassword,\n      agreeTerms,\n      showPassword,\n      isLoading,\n      errors,\n      handleRegister,\n      togglePassword\n    };\n  }\n};","map":{"version":3,"names":["ref","reactive","useStore","useRouter","name","setup","store","router","username","email","password","confirmPassword","agreeTerms","showPassword","isLoading","errors","terms","validateForm","isValid","value","length","test","handleRegister","result","dispatch","redirectTo","console","log","push","error","response","data","message","togglePassword"],"sources":["E:\\code\\PersonalBolg1\\frontend\\src\\views\\RegisterView.vue"],"sourcesContent":["<template>\n  <div class=\"register-container\">\n    <div class=\"register-card\">\n      <div class=\"card-header\">\n        <h2>加入甜梦星球</h2>\n        <div class=\"mascot\">🌟</div>\n      </div>\n      \n      <form @submit.prevent=\"handleRegister\" class=\"register-form\">\n        <div class=\"form-group\">\n          <label>用户名</label>\n          <div class=\"input-wrapper\">\n            <input \n              v-model=\"username\" \n              type=\"text\" \n              required \n              placeholder=\"请输入用户名\"\n              :class=\"{ 'error': errors.username }\"\n            >\n            <span class=\"input-icon\">👤</span>\n          </div>\n          <span class=\"error-message\" v-if=\"errors.username\">{{ errors.username }}</span>\n        </div>\n\n        <div class=\"form-group\">\n          <label>邮箱</label>\n          <div class=\"input-wrapper\">\n            <input \n              v-model=\"email\" \n              type=\"email\" \n              required \n              placeholder=\"请输入邮箱\"\n              :class=\"{ 'error': errors.email }\"\n            >\n            <span class=\"input-icon\">✉️</span>\n          </div>\n          <span class=\"error-message\" v-if=\"errors.email\">{{ errors.email }}</span>\n        </div>\n\n        <div class=\"form-group\">\n          <label>密码</label>\n          <div class=\"input-wrapper\">\n            <input \n              v-model=\"password\" \n              :type=\"showPassword ? 'text' : 'password'\" \n              required \n              placeholder=\"请输入密码\"\n              :class=\"{ 'error': errors.password }\"\n            >\n            <span \n              class=\"input-icon clickable\" \n              @click=\"togglePassword\"\n            >\n              {{ showPassword ? '🙈' : '🙊' }}\n            </span>\n          </div>\n          <span class=\"error-message\" v-if=\"errors.password\">{{ errors.password }}</span>\n        </div>\n\n        <div class=\"form-group\">\n          <label>确认密码</label>\n          <div class=\"input-wrapper\">\n            <input \n              v-model=\"confirmPassword\" \n              :type=\"showPassword ? 'text' : 'password'\" \n              required \n              placeholder=\"请再次输入密码\"\n              :class=\"{ 'error': errors.confirmPassword }\"\n            >\n            <span class=\"input-icon\">🔒</span>\n          </div>\n          <span class=\"error-message\" v-if=\"errors.confirmPassword\">{{ errors.confirmPassword }}</span>\n        </div>\n\n        <div class=\"form-group terms\">\n          <label class=\"checkbox-label\">\n            <input type=\"checkbox\" v-model=\"agreeTerms\">\n            <span class=\"checkbox-text\">\n              我同意\n              <router-link to=\"/terms\" class=\"terms-link\">服务条款</router-link>\n              和\n              <router-link to=\"/privacy\" class=\"terms-link\">隐私政策</router-link>\n            </span>\n          </label>\n          <span class=\"error-message\" v-if=\"errors.terms\">{{ errors.terms }}</span>\n        </div>\n\n        <button type=\"submit\" class=\"submit-btn\" :disabled=\"isLoading || !agreeTerms\">\n          {{ isLoading ? '注册中...' : '开启梦幻之旅' }}\n          <span class=\"btn-icon\" v-if=\"!isLoading\">✨</span>\n          <span class=\"btn-icon loading\" v-else>🌟</span>\n        </button>\n      </form>\n\n      <div class=\"card-footer\">\n        <p>已有账号？ \n          <router-link to=\"/login\" class=\"login-link\">\n            立即登录 <span class=\"link-icon\">🎀</span>\n          </router-link>\n        </p>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { ref, reactive } from 'vue'\nimport { useStore } from 'vuex'\nimport { useRouter } from 'vue-router'\n\nexport default {\n  name: 'RegisterView',\n  setup() {\n    const store = useStore()\n    const router = useRouter()\n    \n    const username = ref('')\n    const email = ref('')\n    const password = ref('')\n    const confirmPassword = ref('')\n    const agreeTerms = ref(false)\n    const showPassword = ref(false)\n    const isLoading = ref(false)\n    const errors = reactive({\n      username: '',\n      email: '',\n      password: '',\n      confirmPassword: '',\n      terms: ''\n    })\n\n    const validateForm = () => {\n      let isValid = true\n      errors.username = ''\n      errors.email = ''\n      errors.password = ''\n      errors.confirmPassword = ''\n      errors.terms = ''\n\n      if (!username.value) {\n        errors.username = '请输入用户名'\n        isValid = false\n      } else if (username.value.length < 2) {\n        errors.username = '用户名至少需要2个字符'\n        isValid = false\n      }\n\n      if (!email.value) {\n        errors.email = '请输入邮箱地址'\n        isValid = false\n      } else if (!/\\S+@\\S+\\.\\S+/.test(email.value)) {\n        errors.email = '请输入有效的邮箱地址'\n        isValid = false\n      }\n\n      if (!password.value) {\n        errors.password = '请输入密码'\n        isValid = false\n      } else if (password.value.length < 6) {\n        errors.password = '密码至少需要6个字符'\n        isValid = false\n      }\n\n      if (!confirmPassword.value) {\n        errors.confirmPassword = '请确认密码'\n        isValid = false\n      } else if (confirmPassword.value !== password.value) {\n        errors.confirmPassword = '两次输入的密码不一致'\n        isValid = false\n      }\n\n      if (!agreeTerms.value) {\n        errors.terms = '请同意服务条款和隐私政策'\n        isValid = false\n      }\n\n      return isValid\n    }\n\n    const handleRegister = async () => {\n      if (!validateForm()) return\n\n      isLoading.value = true\n      try {\n        const result = await store.dispatch('auth/register', {\n          username: username.value,\n          email: email.value,\n          password: password.value\n        })\n        \n        if (result && result.redirectTo) {\n          console.log('注册成功，重定向到:', result.redirectTo)\n          router.push(result.redirectTo)\n        } else {\n          console.log('注册成功，但没有重定向信息')\n          router.push('/profile')\n        }\n      } catch (error) {\n        console.error('注册出错:', error)\n        if (error.response?.data?.message) {\n          errors.email = error.response.data.message\n        } else {\n          errors.email = error.message || '注册失败，请稍后重试'\n        }\n      } finally {\n        isLoading.value = false\n      }\n    }\n\n    const togglePassword = () => {\n      showPassword.value = !showPassword.value\n    }\n\n    return {\n      username,\n      email,\n      password,\n      confirmPassword,\n      agreeTerms,\n      showPassword,\n      isLoading,\n      errors,\n      handleRegister,\n      togglePassword\n    }\n  }\n}\n</script>\n\n<style scoped>\n.register-container {\n  min-height: 100vh;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background: linear-gradient(135deg, var(--primary-pink) 0%, var(--primary-blue) 100%);\n  padding: 20px;\n  position: relative;\n  overflow: hidden;\n}\n\n.register-container::before {\n  content: '';\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  background-image: \n    radial-gradient(circle at 20% 20%, rgba(255, 255, 255, 0.1) 0%, transparent 8%),\n    radial-gradient(circle at 80% 40%, rgba(255, 255, 255, 0.1) 0%, transparent 8%),\n    radial-gradient(circle at 40% 60%, rgba(255, 255, 255, 0.1) 0%, transparent 8%),\n    radial-gradient(circle at 70% 80%, rgba(255, 255, 255, 0.1) 0%, transparent 8%);\n  animation: twinkle 4s ease-in-out infinite alternate;\n}\n\n.register-card {\n  background: rgba(255, 255, 255, 0.95);\n  border-radius: 24px;\n  padding: 30px;\n  width: 100%;\n  max-width: 420px;\n  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);\n  backdrop-filter: blur(10px);\n  animation: float 6s ease-in-out infinite;\n  position: relative;\n  z-index: 1;\n}\n\n.card-header {\n  text-align: center;\n  margin-bottom: 30px;\n}\n\n.card-header h2 {\n  color: var(--text-primary);\n  font-size: 1.8rem;\n  margin-bottom: 10px;\n  background: linear-gradient(45deg, var(--primary-purple), var(--primary-pink));\n  -webkit-background-clip: text;\n  -webkit-text-fill-color: transparent;\n}\n\n.mascot {\n  font-size: 3rem;\n  animation: bounce 2s ease infinite;\n}\n\n.register-form {\n  display: flex;\n  flex-direction: column;\n  gap: 20px;\n}\n\n.form-group {\n  position: relative;\n}\n\n.input-wrapper {\n  position: relative;\n  display: flex;\n  align-items: center;\n}\n\ninput {\n  width: 100%;\n  padding: 12px 40px 12px 15px;\n  border: 2px solid var(--primary-purple);\n  border-radius: 20px;\n  font-size: 1rem;\n  transition: all 0.3s ease;\n  background: rgba(255, 255, 255, 0.9);\n}\n\ninput:focus {\n  outline: none;\n  border-color: var(--primary-pink);\n  box-shadow: 0 0 0 3px rgba(255, 182, 193, 0.2);\n  transform: translateY(-2px);\n}\n\n.input-icon {\n  position: absolute;\n  right: 15px;\n  font-size: 1.2rem;\n}\n\n.input-icon.clickable {\n  cursor: pointer;\n}\n\n.terms {\n  margin: 10px 0;\n}\n\n.checkbox-label {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  cursor: pointer;\n}\n\n.terms-link {\n  color: var(--primary-purple);\n  text-decoration: none;\n  font-weight: 600;\n}\n\n.terms-link:hover {\n  color: var(--primary-pink);\n}\n\n.submit-btn {\n  background: linear-gradient(45deg, var(--primary-purple), var(--primary-pink));\n  color: white;\n  border: none;\n  border-radius: 20px;\n  padding: 12px;\n  font-size: 1.1rem;\n  cursor: pointer;\n  transition: all 0.3s ease;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: 10px;\n}\n\n.submit-btn:hover:not(:disabled) {\n  transform: translateY(-2px);\n  box-shadow: 0 5px 15px rgba(255, 182, 193, 0.4);\n}\n\n.submit-btn:disabled {\n  opacity: 0.7;\n  cursor: not-allowed;\n}\n\n.btn-icon.loading {\n  animation: spin 1s linear infinite;\n}\n\n.card-footer {\n  text-align: center;\n  margin-top: 20px;\n}\n\n.login-link {\n  color: var(--primary-purple);\n  text-decoration: none;\n  font-weight: 600;\n  display: inline-flex;\n  align-items: center;\n  gap: 5px;\n}\n\n.login-link:hover {\n  color: var(--primary-pink);\n}\n\n.error-message {\n  color: #ff6b6b;\n  font-size: 0.9rem;\n  margin-top: 5px;\n}\n\n@keyframes float {\n  0%, 100% { transform: translateY(0); }\n  50% { transform: translateY(-10px); }\n}\n\n@keyframes bounce {\n  0%, 100% { transform: translateY(0); }\n  50% { transform: translateY(-15px); }\n}\n\n@keyframes spin {\n  from { transform: rotate(0deg); }\n  to { transform: rotate(360deg); }\n}\n\n@keyframes twinkle {\n  0% { opacity: 0.5; }\n  100% { opacity: 1; }\n}\n\n@media (max-width: 480px) {\n  .register-card {\n    padding: 20px;\n  }\n\n  .card-header h2 {\n    font-size: 1.5rem;\n  }\n\n  input {\n    font-size: 0.9rem;\n  }\n}\n</style>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}