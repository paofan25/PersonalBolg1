{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport weather from '@/services/weather';\nimport chat from '@/services/chat';\nconst state = {\n  messages: [],\n  isTyping: false,\n  currentEmotion: 'neutral',\n  weatherInfo: null,\n  soundEnabled: true,\n  lastWeatherQuery: null\n};\nconst getters = {\n  getAllMessages: state => state.messages,\n  getIsTyping: state => state.isTyping,\n  getCurrentEmotion: state => state.currentEmotion,\n  getWeatherInfo: state => state.weatherInfo,\n  getSoundEnabled: state => state.soundEnabled,\n  getLastWeatherQuery: state => state.lastWeatherQuery\n};\nconst mutations = {\n  ADD_MESSAGE(state, message) {\n    state.messages.push({\n      id: Date.now(),\n      timestamp: new Date(),\n      ...message\n    });\n  },\n  SET_TYPING(state, status) {\n    state.isTyping = status;\n  },\n  SET_EMOTION(state, emotion) {\n    state.currentEmotion = emotion;\n  },\n  SET_WEATHER_INFO(state, info) {\n    state.weatherInfo = info;\n    if (info) {\n      state.lastWeatherQuery = {\n        cityName: info.cityName,\n        timestamp: Date.now()\n      };\n    }\n  },\n  TOGGLE_SOUND(state) {\n    state.soundEnabled = !state.soundEnabled;\n  },\n  CLEAR_MESSAGES(state) {\n    state.messages = [];\n  }\n};\nconst actions = {\n  async sendMessage({\n    commit\n  }, text) {\n    // Ê∑ªÂä†Áî®Êà∑Ê∂àÊÅØ\n    commit('ADD_MESSAGE', {\n      type: 'user',\n      text\n    });\n\n    // ËÆæÁΩÆÊ≠£Âú®ËæìÂÖ•Áä∂ÊÄÅ\n    commit('SET_TYPING', true);\n    try {\n      // ÂàÜÊûêÊÉÖÁª™\n      const emotion = await chat.analyzeEmotion(text);\n      commit('SET_EMOTION', emotion);\n\n      // ÁîüÊàêÂõûÂ§ç\n      const response = await chat.generateResponse(text, emotion);\n\n      // Â¶ÇÊûúÊòØÂ§©Ê∞îÊü•ËØ¢ÔºåÊõ¥Êñ∞Â§©Ê∞î‰ø°ÊÅØ\n      if (response.type === 'weather' && response.data) {\n        commit('SET_WEATHER_INFO', response.data);\n      }\n\n      // Ê∑ªÂä†Âä©ÊâãÂõûÂ§ç\n      commit('ADD_MESSAGE', {\n        type: 'assistant',\n        ...response\n      });\n    } catch (error) {\n      console.error('ÂèëÈÄÅÊ∂àÊÅØÂ§±Ë¥•:', error);\n      commit('ADD_MESSAGE', {\n        type: 'error',\n        text: 'Êä±Ê≠âÔºåÊàëÁé∞Âú®ÊúâÁÇπÁ¥Ø‰∫ÜÔºåÂæÖ‰ºöÂÜçËÅäÂêß~ üò¥'\n      });\n    } finally {\n      commit('SET_TYPING', false);\n    }\n  },\n  async initializeWeather({\n    commit\n  }) {\n    try {\n      console.log('ÂàùÂßãÂåñÂ§©Ê∞î‰ø°ÊÅØ');\n      const weatherData = await weather.getLocationWeather();\n      if (weatherData) {\n        commit('SET_WEATHER_INFO', weatherData);\n        // Ê∑ªÂä†Ê¨¢ËøéÊ∂àÊÅØÂíåÂ§©Ê∞î‰ø°ÊÅØ\n        commit('ADD_MESSAGE', {\n          type: 'assistant',\n          text: `Ê¨¢ËøéÂõûÊù•ÔºÅËÆ©ÊàëÂëäËØâ‰Ω†${weatherData.cityName}ÁöÑÂ§©Ê∞îÊÉÖÂÜµ~`\n        });\n        commit('ADD_MESSAGE', {\n          type: 'weather',\n          text: weather.generateWeatherDescription(weatherData),\n          data: weatherData\n        });\n      }\n    } catch (error) {\n      console.error('ÂàùÂßãÂåñÂ§©Ê∞îÂ§±Ë¥•:', error);\n    }\n  },\n  clearChat({\n    commit\n  }) {\n    commit('CLEAR_MESSAGES');\n    commit('SET_WEATHER_INFO', null);\n  }\n};\nexport default {\n  namespaced: true,\n  state,\n  getters,\n  mutations,\n  actions\n};","map":{"version":3,"names":["weather","chat","state","messages","isTyping","currentEmotion","weatherInfo","soundEnabled","lastWeatherQuery","getters","getAllMessages","getIsTyping","getCurrentEmotion","getWeatherInfo","getSoundEnabled","getLastWeatherQuery","mutations","ADD_MESSAGE","message","push","id","Date","now","timestamp","SET_TYPING","status","SET_EMOTION","emotion","SET_WEATHER_INFO","info","cityName","TOGGLE_SOUND","CLEAR_MESSAGES","actions","sendMessage","commit","text","type","analyzeEmotion","response","generateResponse","data","error","console","initializeWeather","log","weatherData","getLocationWeather","generateWeatherDescription","clearChat","namespaced"],"sources":["E:/code/PersonalBolg1/frontend/src/store/modules/chat.js"],"sourcesContent":["import weather from '@/services/weather';\r\nimport chat from '@/services/chat';\r\n\r\nconst state = {\r\n  messages: [],\r\n  isTyping: false,\r\n  currentEmotion: 'neutral',\r\n  weatherInfo: null,\r\n  soundEnabled: true,\r\n  lastWeatherQuery: null\r\n};\r\n\r\nconst getters = {\r\n  getAllMessages: state => state.messages,\r\n  getIsTyping: state => state.isTyping,\r\n  getCurrentEmotion: state => state.currentEmotion,\r\n  getWeatherInfo: state => state.weatherInfo,\r\n  getSoundEnabled: state => state.soundEnabled,\r\n  getLastWeatherQuery: state => state.lastWeatherQuery\r\n};\r\n\r\nconst mutations = {\r\n  ADD_MESSAGE(state, message) {\r\n    state.messages.push({\r\n      id: Date.now(),\r\n      timestamp: new Date(),\r\n      ...message\r\n    });\r\n  },\r\n  SET_TYPING(state, status) {\r\n    state.isTyping = status;\r\n  },\r\n  SET_EMOTION(state, emotion) {\r\n    state.currentEmotion = emotion;\r\n  },\r\n  SET_WEATHER_INFO(state, info) {\r\n    state.weatherInfo = info;\r\n    if (info) {\r\n      state.lastWeatherQuery = {\r\n        cityName: info.cityName,\r\n        timestamp: Date.now()\r\n      };\r\n    }\r\n  },\r\n  TOGGLE_SOUND(state) {\r\n    state.soundEnabled = !state.soundEnabled;\r\n  },\r\n  CLEAR_MESSAGES(state) {\r\n    state.messages = [];\r\n  }\r\n};\r\n\r\nconst actions = {\r\n  async sendMessage({ commit }, text) {\r\n    // Ê∑ªÂä†Áî®Êà∑Ê∂àÊÅØ\r\n    commit('ADD_MESSAGE', {\r\n      type: 'user',\r\n      text\r\n    });\r\n\r\n    // ËÆæÁΩÆÊ≠£Âú®ËæìÂÖ•Áä∂ÊÄÅ\r\n    commit('SET_TYPING', true);\r\n\r\n    try {\r\n      // ÂàÜÊûêÊÉÖÁª™\r\n      const emotion = await chat.analyzeEmotion(text);\r\n      commit('SET_EMOTION', emotion);\r\n\r\n      // ÁîüÊàêÂõûÂ§ç\r\n      const response = await chat.generateResponse(text, emotion);\r\n\r\n      // Â¶ÇÊûúÊòØÂ§©Ê∞îÊü•ËØ¢ÔºåÊõ¥Êñ∞Â§©Ê∞î‰ø°ÊÅØ\r\n      if (response.type === 'weather' && response.data) {\r\n        commit('SET_WEATHER_INFO', response.data);\r\n      }\r\n\r\n      // Ê∑ªÂä†Âä©ÊâãÂõûÂ§ç\r\n      commit('ADD_MESSAGE', {\r\n        type: 'assistant',\r\n        ...response\r\n      });\r\n\r\n    } catch (error) {\r\n      console.error('ÂèëÈÄÅÊ∂àÊÅØÂ§±Ë¥•:', error);\r\n      commit('ADD_MESSAGE', {\r\n        type: 'error',\r\n        text: 'Êä±Ê≠âÔºåÊàëÁé∞Âú®ÊúâÁÇπÁ¥Ø‰∫ÜÔºåÂæÖ‰ºöÂÜçËÅäÂêß~ üò¥'\r\n      });\r\n    } finally {\r\n      commit('SET_TYPING', false);\r\n    }\r\n  },\r\n\r\n  async initializeWeather({ commit }) {\r\n    try {\r\n      console.log('ÂàùÂßãÂåñÂ§©Ê∞î‰ø°ÊÅØ');\r\n      const weatherData = await weather.getLocationWeather();\r\n      if (weatherData) {\r\n        commit('SET_WEATHER_INFO', weatherData);\r\n        // Ê∑ªÂä†Ê¨¢ËøéÊ∂àÊÅØÂíåÂ§©Ê∞î‰ø°ÊÅØ\r\n        commit('ADD_MESSAGE', {\r\n          type: 'assistant',\r\n          text: `Ê¨¢ËøéÂõûÊù•ÔºÅËÆ©ÊàëÂëäËØâ‰Ω†${weatherData.cityName}ÁöÑÂ§©Ê∞îÊÉÖÂÜµ~`,\r\n        });\r\n        commit('ADD_MESSAGE', {\r\n          type: 'weather',\r\n          text: weather.generateWeatherDescription(weatherData),\r\n          data: weatherData\r\n        });\r\n      }\r\n    } catch (error) {\r\n      console.error('ÂàùÂßãÂåñÂ§©Ê∞îÂ§±Ë¥•:', error);\r\n    }\r\n  },\r\n\r\n  clearChat({ commit }) {\r\n    commit('CLEAR_MESSAGES');\r\n    commit('SET_WEATHER_INFO', null);\r\n  }\r\n};\r\n\r\nexport default {\r\n  namespaced: true,\r\n  state,\r\n  getters,\r\n  mutations,\r\n  actions\r\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}