{"ast":null,"code":"import \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.map.js\";\nimport \"core-js/modules/web.dom-exception.stack.js\";\nimport CryptoJS from 'crypto-js';\n\n// 配置信息\nconst CONFIG = {\n  appid: 'bb840282',\n  apiKey: '178baf6c846eaeb5ea632cdab055b9cd',\n  apiSecret: 'YjMzMmE3NzczOWExZjQ3ZWI1NWY3OWJi',\n  domain: 'lite',\n  url: 'wss://spark-api.xf-yun.com/v1.1/chat'\n};\nclass XfyunService {\n  constructor() {\n    // 尝试从环境变量获取配置\n    this.appid = process.env.VUE_APP_XFYUN_APPID || CONFIG.appid;\n    this.apiKey = process.env.VUE_APP_XFYUN_API_KEY || CONFIG.apiKey;\n    this.apiSecret = process.env.VUE_APP_XFYUN_API_SECRET || CONFIG.apiSecret;\n    this.domain = CONFIG.domain;\n    this.url = CONFIG.url;\n    console.log('XfyunService initialized with:', {\n      appid: this.appid,\n      apiKey: this.apiKey?.substring(0, 10) + '...',\n      hasSecret: !!this.apiSecret\n    });\n  }\n\n  // 生成鉴权url\n  getAuthUrl() {\n    try {\n      const host = 'spark-api.xf-yun.com/v1.1/chat';\n      const date = new Date().toUTCString();\n      const signatureOrigin = `host: ${host}\\ndate: ${date}\\nGET /v1.1/chat HTTP/1.1`;\n      const signatureSha = CryptoJS.HmacSHA256(signatureOrigin, this.apiSecret);\n      const signature = CryptoJS.enc.Base64.stringify(signatureSha);\n      const authorizationOrigin = `api_key=\"${this.apiKey}\", algorithm=\"hmac-sha256\", headers=\"host date request-line\", signature=\"${signature}\"`;\n      const authorization = btoa(authorizationOrigin);\n      return `${this.url}?authorization=${authorization}&date=${date}&host=${host}`;\n    } catch (error) {\n      console.error('生成鉴权URL失败:', error);\n      throw new Error('生成鉴权URL失败');\n    }\n  }\n\n  // 建立WebSocket连接\n  createWebSocket() {\n    return new Promise((resolve, reject) => {\n      try {\n        const url = this.getAuthUrl();\n        console.log('Creating WebSocket connection...');\n        const ws = new WebSocket(url);\n        let connectionTimeout = setTimeout(() => {\n          ws.close();\n          reject(new Error('WebSocket连接超时'));\n        }, 10000);\n        ws.onopen = () => {\n          console.log('WebSocket连接已建立');\n          clearTimeout(connectionTimeout);\n          resolve(ws);\n        };\n        ws.onerror = error => {\n          console.error('WebSocket连接错误:', error);\n          clearTimeout(connectionTimeout);\n          reject(new Error('WebSocket连接失败'));\n        };\n        ws.onclose = event => {\n          console.log('WebSocket连接关闭:', event);\n          clearTimeout(connectionTimeout);\n        };\n      } catch (error) {\n        console.error('创建WebSocket失败:', error);\n        reject(new Error('创建WebSocket失败'));\n      }\n    });\n  }\n\n  // 发送消息并获取回复\n  async sendMessage(text) {\n    try {\n      console.log('Sending message:', text);\n      const messages = [{\n        role: 'user',\n        content: text\n      }];\n      return await this.chat(messages);\n    } catch (error) {\n      console.error('发送消息失败:', error);\n      throw error;\n    }\n  }\n\n  // 聊天核心方法\n  async chat(messages) {\n    try {\n      console.log('Starting chat with messages:', messages);\n      const ws = await this.createWebSocket();\n      return new Promise((resolve, reject) => {\n        let responseText = '';\n        let messageTimeout;\n        const resetMessageTimeout = () => {\n          clearTimeout(messageTimeout);\n          messageTimeout = setTimeout(() => {\n            ws.close();\n            reject(new Error('消息接收超时'));\n          }, 30000);\n        };\n        ws.onmessage = event => {\n          try {\n            resetMessageTimeout();\n            const response = JSON.parse(event.data);\n            console.log('Received message:', response);\n            if (response.header.code !== 0) {\n              console.error('请求错误:', response.header.message);\n              ws.close();\n              reject(new Error(response.header.message));\n              return;\n            }\n            const payload = response.payload;\n            const choices = payload.choices;\n            const status = choices.status;\n            const text = choices.text?.[0]?.content || '';\n            responseText += text;\n            if (status === 2) {\n              console.log('Chat completed:', responseText);\n              clearTimeout(messageTimeout);\n              ws.close();\n              resolve(responseText);\n            }\n          } catch (error) {\n            console.error('处理消息失败:', error);\n            clearTimeout(messageTimeout);\n            ws.close();\n            reject(new Error('处理消息失败'));\n          }\n        };\n        const data = {\n          header: {\n            app_id: this.appid,\n            uid: 'user_' + Date.now()\n          },\n          parameter: {\n            chat: {\n              domain: this.domain,\n              temperature: 0.5,\n              max_tokens: 2048\n            }\n          },\n          payload: {\n            message: {\n              text: messages.map(msg => ({\n                role: msg.role,\n                content: msg.content\n              }))\n            }\n          }\n        };\n        console.log('Sending data:', data);\n        resetMessageTimeout();\n        ws.send(JSON.stringify(data));\n      });\n    } catch (error) {\n      console.error('聊天请求失败:', error);\n      throw error;\n    }\n  }\n\n  // 分析情绪\n  async analyzeEmotion(text) {\n    try {\n      console.log('Analyzing emotion for text:', text);\n      const prompt = `请分析以下文本的情绪，只返回以下情绪类型之一：happy（开心）、sad（伤心）、worried（担忧）、excited（兴奋）、neutral（平静）。\n文本：${text}\n情绪：`;\n      const response = await this.sendMessage(prompt);\n      const emotion = response.toLowerCase().trim();\n      console.log('Emotion analysis result:', emotion);\n      if (['happy', 'sad', 'worried', 'excited', 'neutral'].includes(emotion)) {\n        return emotion;\n      }\n      return 'neutral';\n    } catch (error) {\n      console.error('情绪分析失败:', error);\n      return 'neutral';\n    }\n  }\n}\n\n// 创建单例实例\nconst xfyunService = new XfyunService();\nconsole.log('XfyunService instance created');\nexport default xfyunService;","map":{"version":3,"names":["CryptoJS","CONFIG","appid","apiKey","apiSecret","domain","url","XfyunService","constructor","process","env","VUE_APP_XFYUN_APPID","VUE_APP_XFYUN_API_KEY","VUE_APP_XFYUN_API_SECRET","console","log","substring","hasSecret","getAuthUrl","host","date","Date","toUTCString","signatureOrigin","signatureSha","HmacSHA256","signature","enc","Base64","stringify","authorizationOrigin","authorization","btoa","error","Error","createWebSocket","Promise","resolve","reject","ws","WebSocket","connectionTimeout","setTimeout","close","onopen","clearTimeout","onerror","onclose","event","sendMessage","text","messages","role","content","chat","responseText","messageTimeout","resetMessageTimeout","onmessage","response","JSON","parse","data","header","code","message","payload","choices","status","app_id","uid","now","parameter","temperature","max_tokens","map","msg","send","analyzeEmotion","prompt","emotion","toLowerCase","trim","includes","xfyunService"],"sources":["E:/code/PersonalBolg1/frontend/src/services/xfyun.js"],"sourcesContent":["import CryptoJS from 'crypto-js';\r\n\r\n// 配置信息\r\nconst CONFIG = {\r\n  appid: 'bb840282',\r\n  apiKey: '178baf6c846eaeb5ea632cdab055b9cd',\r\n  apiSecret: 'YjMzMmE3NzczOWExZjQ3ZWI1NWY3OWJi',\r\n  domain: 'lite',\r\n  url: 'wss://spark-api.xf-yun.com/v1.1/chat'\r\n};\r\n\r\nclass XfyunService {\r\n  constructor() {\r\n    // 尝试从环境变量获取配置\r\n    this.appid = process.env.VUE_APP_XFYUN_APPID || CONFIG.appid;\r\n    this.apiKey = process.env.VUE_APP_XFYUN_API_KEY || CONFIG.apiKey;\r\n    this.apiSecret = process.env.VUE_APP_XFYUN_API_SECRET || CONFIG.apiSecret;\r\n    this.domain = CONFIG.domain;\r\n    this.url = CONFIG.url;\r\n\r\n    console.log('XfyunService initialized with:', {\r\n      appid: this.appid,\r\n      apiKey: this.apiKey?.substring(0, 10) + '...',\r\n      hasSecret: !!this.apiSecret\r\n    });\r\n  }\r\n\r\n  // 生成鉴权url\r\n  getAuthUrl() {\r\n    try {\r\n      const host = 'spark-api.xf-yun.com/v1.1/chat';\r\n      const date = new Date().toUTCString();\r\n      const signatureOrigin = `host: ${host}\\ndate: ${date}\\nGET /v1.1/chat HTTP/1.1`;\r\n      const signatureSha = CryptoJS.HmacSHA256(signatureOrigin, this.apiSecret);\r\n      const signature = CryptoJS.enc.Base64.stringify(signatureSha);\r\n      const authorizationOrigin = `api_key=\"${this.apiKey}\", algorithm=\"hmac-sha256\", headers=\"host date request-line\", signature=\"${signature}\"`;\r\n      const authorization = btoa(authorizationOrigin);\r\n      return `${this.url}?authorization=${authorization}&date=${date}&host=${host}`;\r\n    } catch (error) {\r\n      console.error('生成鉴权URL失败:', error);\r\n      throw new Error('生成鉴权URL失败');\r\n    }\r\n  }\r\n\r\n  // 建立WebSocket连接\r\n  createWebSocket() {\r\n    return new Promise((resolve, reject) => {\r\n      try {\r\n        const url = this.getAuthUrl();\r\n        console.log('Creating WebSocket connection...');\r\n        const ws = new WebSocket(url);\r\n        \r\n        let connectionTimeout = setTimeout(() => {\r\n          ws.close();\r\n          reject(new Error('WebSocket连接超时'));\r\n        }, 10000);\r\n        \r\n        ws.onopen = () => {\r\n          console.log('WebSocket连接已建立');\r\n          clearTimeout(connectionTimeout);\r\n          resolve(ws);\r\n        };\r\n        \r\n        ws.onerror = (error) => {\r\n          console.error('WebSocket连接错误:', error);\r\n          clearTimeout(connectionTimeout);\r\n          reject(new Error('WebSocket连接失败'));\r\n        };\r\n\r\n        ws.onclose = (event) => {\r\n          console.log('WebSocket连接关闭:', event);\r\n          clearTimeout(connectionTimeout);\r\n        };\r\n      } catch (error) {\r\n        console.error('创建WebSocket失败:', error);\r\n        reject(new Error('创建WebSocket失败'));\r\n      }\r\n    });\r\n  }\r\n\r\n  // 发送消息并获取回复\r\n  async sendMessage(text) {\r\n    try {\r\n      console.log('Sending message:', text);\r\n      const messages = [{ role: 'user', content: text }];\r\n      return await this.chat(messages);\r\n    } catch (error) {\r\n      console.error('发送消息失败:', error);\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  // 聊天核心方法\r\n  async chat(messages) {\r\n    try {\r\n      console.log('Starting chat with messages:', messages);\r\n      const ws = await this.createWebSocket();\r\n      \r\n      return new Promise((resolve, reject) => {\r\n        let responseText = '';\r\n        let messageTimeout;\r\n        \r\n        const resetMessageTimeout = () => {\r\n          clearTimeout(messageTimeout);\r\n          messageTimeout = setTimeout(() => {\r\n            ws.close();\r\n            reject(new Error('消息接收超时'));\r\n          }, 30000);\r\n        };\r\n        \r\n        ws.onmessage = (event) => {\r\n          try {\r\n            resetMessageTimeout();\r\n            const response = JSON.parse(event.data);\r\n            console.log('Received message:', response);\r\n            \r\n            if (response.header.code !== 0) {\r\n              console.error('请求错误:', response.header.message);\r\n              ws.close();\r\n              reject(new Error(response.header.message));\r\n              return;\r\n            }\r\n            \r\n            const payload = response.payload;\r\n            const choices = payload.choices;\r\n            const status = choices.status;\r\n            const text = choices.text?.[0]?.content || '';\r\n            \r\n            responseText += text;\r\n            \r\n            if (status === 2) {\r\n              console.log('Chat completed:', responseText);\r\n              clearTimeout(messageTimeout);\r\n              ws.close();\r\n              resolve(responseText);\r\n            }\r\n          } catch (error) {\r\n            console.error('处理消息失败:', error);\r\n            clearTimeout(messageTimeout);\r\n            ws.close();\r\n            reject(new Error('处理消息失败'));\r\n          }\r\n        };\r\n        \r\n        const data = {\r\n          header: {\r\n            app_id: this.appid,\r\n            uid: 'user_' + Date.now()\r\n          },\r\n          parameter: {\r\n            chat: {\r\n              domain: this.domain,\r\n              temperature: 0.5,\r\n              max_tokens: 2048\r\n            }\r\n          },\r\n          payload: {\r\n            message: {\r\n              text: messages.map(msg => ({\r\n                role: msg.role,\r\n                content: msg.content\r\n              }))\r\n            }\r\n          }\r\n        };\r\n        \r\n        console.log('Sending data:', data);\r\n        resetMessageTimeout();\r\n        ws.send(JSON.stringify(data));\r\n      });\r\n    } catch (error) {\r\n      console.error('聊天请求失败:', error);\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  // 分析情绪\r\n  async analyzeEmotion(text) {\r\n    try {\r\n      console.log('Analyzing emotion for text:', text);\r\n      const prompt = `请分析以下文本的情绪，只返回以下情绪类型之一：happy（开心）、sad（伤心）、worried（担忧）、excited（兴奋）、neutral（平静）。\r\n文本：${text}\r\n情绪：`;\r\n      \r\n      const response = await this.sendMessage(prompt);\r\n      const emotion = response.toLowerCase().trim();\r\n      \r\n      console.log('Emotion analysis result:', emotion);\r\n      \r\n      if (['happy', 'sad', 'worried', 'excited', 'neutral'].includes(emotion)) {\r\n        return emotion;\r\n      }\r\n      return 'neutral';\r\n    } catch (error) {\r\n      console.error('情绪分析失败:', error);\r\n      return 'neutral';\r\n    }\r\n  }\r\n}\r\n\r\n// 创建单例实例\r\nconst xfyunService = new XfyunService();\r\nconsole.log('XfyunService instance created');\r\n\r\nexport default xfyunService;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}